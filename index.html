<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Kali18 Security Hub</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<script src="https://accounts.google.com/gsi/client" async defer></script>

<style>
:root {
    --primary: #00ff99;
    --primary-dark: #00cc7a;
    --bg-dark: #0a0a0a;
    --bg-darker: #050505;
    --bg-card: #111111;
    --bg-card-hover: #1a1a1a;
    --text-primary: #e5e5e5;
    --text-secondary: #b0b0b0;
    --border: #2a2a2a;
    --shadow: rgba(0, 255, 153, 0.1);
    --gradient: linear-gradient(135deg, #00ff99 0%, #00cc7a 100%);
}

* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

body {
    font-family: 'Segoe UI', 'Ubuntu', 'Cantarell', sans-serif;
    background: var(--bg-darker);
    color: var(--text-primary);
    line-height: 1.6;
    overflow-x: hidden;
}

/* Header with modern design */
header {
    background: linear-gradient(135deg, #0a0a0a 0%, #111111 100%);
    padding: 2rem 1rem;
    text-align: center;
    border-bottom: 2px solid var(--primary);
    box-shadow: 0 4px 20px var(--shadow);
    position: sticky;
    top: 0;
    z-index: 1000;
    backdrop-filter: blur(10px);
}

header h1 {
    color: var(--primary);
    font-size: clamp(1.8rem, 5vw, 2.5rem);
    margin-bottom: 0.5rem;
    text-shadow: 0 0 20px var(--shadow);
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 1rem;
}

header p {
    color: var(--text-secondary);
    font-size: clamp(0.9rem, 2vw, 1.1rem);
}

/* Modern Navigation */
nav {
    background: var(--bg-dark);
    padding: 1rem;
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    gap: 0.5rem;
    border-bottom: 1px solid var(--border);
    position: sticky;
    top: 80px;
    z-index: 999;
}

nav button {
    padding: 0.75rem 1.5rem;
    background: var(--bg-card);
    color: var(--primary);
    border: 1px solid var(--border);
    border-radius: 8px;
    cursor: pointer;
    font-size: 0.95rem;
    font-weight: 500;
    transition: all 0.3s ease;
    display: flex;
    align-items: center;
    gap: 0.5rem;
}

nav button:hover {
    background: var(--gradient);
    color: #000;
    transform: translateY(-2px);
    box-shadow: 0 4px 12px var(--shadow);
    border-color: var(--primary);
}

nav button.active {
    background: var(--gradient);
    color: #000;
    border-color: var(--primary);
}

/* Hero + layout */
.hero {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
    gap: 2rem;
    align-items: center;
    margin-top: 1rem;
}

.hero-left {
    background: radial-gradient(120% 120% at 10% 10%, rgba(0, 255, 153, 0.08), transparent 40%), var(--bg-card);
    padding: 2rem;
    border-radius: 16px;
    border: 1px solid var(--border);
    box-shadow: 0 12px 40px rgba(0, 0, 0, 0.35);
}

.hero-badge {
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
    padding: 0.4rem 0.9rem;
    background: rgba(0, 255, 153, 0.1);
    color: var(--primary);
    border: 1px solid var(--border);
    border-radius: 999px;
    font-weight: 600;
    letter-spacing: 0.5px;
    margin-bottom: 0.9rem;
}

.hero h1 {
    font-size: clamp(2rem, 5vw, 2.7rem);
    margin-bottom: 0.75rem;
    color: var(--text-primary);
}

.hero p {
    color: var(--text-secondary);
    margin-bottom: 1.25rem;
}

.hero-actions {
    display: flex;
    flex-wrap: wrap;
    gap: 0.75rem;
    margin-top: 1rem;
}

.btn {
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
    padding: 0.85rem 1.4rem;
    border-radius: 10px;
    border: 1px solid var(--border);
    background: var(--bg-card);
    color: var(--primary);
    cursor: pointer;
    font-weight: 600;
    transition: all 0.25s ease;
    text-decoration: none;
}

.btn.primary {
    background: var(--gradient);
    color: #000;
    border-color: var(--primary);
    box-shadow: 0 8px 24px var(--shadow);
}

.btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 10px 24px var(--shadow);
}

.hero-stats {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
    gap: 0.75rem;
    margin-top: 1.5rem;
}

.stat-card {
    padding: 1rem;
    border-radius: 10px;
    background: var(--bg-card);
    border: 1px solid var(--border);
    text-align: left;
}

.stat-number {
    font-size: 1.4rem;
    color: var(--primary);
    font-weight: 700;
}

.stat-label {
    color: var(--text-secondary);
    font-size: 0.9rem;
}

.hero-right {
    background: var(--bg-card);
    padding: 2rem;
    border-radius: 16px;
    border: 1px solid var(--border);
    box-shadow: 0 12px 40px rgba(0, 0, 0, 0.35);
    position: relative;
    overflow: hidden;
}

.glow {
    position: absolute;
    width: 220px;
    height: 220px;
    background: radial-gradient(circle, rgba(0,255,153,0.15) 0%, rgba(0,255,153,0) 65%);
    top: -60px;
    right: -60px;
    pointer-events: none;
}

.auth-status {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    margin-bottom: 1rem;
    padding: 0.75rem 1rem;
    border-radius: 10px;
    background: rgba(0, 255, 153, 0.06);
    border: 1px solid var(--border);
}

.status-dot {
    width: 12px;
    height: 12px;
    border-radius: 50%;
    background: #ff6347;
    box-shadow: 0 0 10px rgba(255,99,71,0.6);
}

.status-dot.online {
    background: #27c93f;
    box-shadow: 0 0 10px rgba(39,201,63,0.6);
}

.auth-card h3 {
    margin-bottom: 0.5rem;
}

.profile-card {
    display: flex;
    gap: 1rem;
    align-items: center;
    margin-top: 1rem;
    padding: 1rem;
    background: var(--bg-dark);
    border: 1px solid var(--border);
    border-radius: 12px;
}

.avatar {
    width: 64px;
    height: 64px;
    border-radius: 50%;
    border: 2px solid var(--primary);
    object-fit: cover;
    background: #0f0f0f;
}

.profile-details small {
    display: block;
    color: var(--text-secondary);
}

.pill {
    display: inline-flex;
    align-items: center;
    gap: 0.35rem;
    padding: 0.25rem 0.7rem;
    background: rgba(0,255,153,0.08);
    color: var(--primary);
    border: 1px solid var(--border);
    border-radius: 999px;
    font-size: 0.85rem;
    margin-top: 0.4rem;
}

/* Search Bar */
.search-container {
    max-width: 1200px;
    margin: 2rem auto;
    padding: 0 1rem;
    display: none;
}

.search-container.active {
    display: block;
}

.search-box {
    width: 100%;
    padding: 1rem 1.5rem;
    background: var(--bg-card);
    border: 2px solid var(--border);
    border-radius: 12px;
    color: var(--text-primary);
    font-size: 1rem;
    transition: all 0.3s ease;
}

.search-box:focus {
    outline: none;
    border-color: var(--primary);
    box-shadow: 0 0 20px var(--shadow);
}

/* Sections */
section {
    padding: 2rem 1rem;
    max-width: 1200px;
    margin: 0 auto;
    display: none;
    animation: fadeIn 0.5s ease;
}

section.active {
    display: block;
}

@keyframes fadeIn {
    from { opacity: 0; transform: translateY(20px); }
    to { opacity: 1; transform: translateY(0); }
}

section h2 {
    color: var(--primary);
    font-size: clamp(1.5rem, 4vw, 2rem);
    margin-bottom: 1.5rem;
    display: flex;
    align-items: center;
    gap: 0.75rem;
    padding-bottom: 0.5rem;
    border-bottom: 2px solid var(--border);
}

/* Modern Card Design */
.box {
    background: var(--bg-card);
    padding: 1.5rem;
    margin-top: 1.5rem;
    border-left: 4px solid var(--primary);
    border-radius: 12px;
    transition: all 0.3s ease;
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
}

.box:hover {
    transform: translateX(5px);
    box-shadow: 0 4px 20px var(--shadow);
    background: var(--bg-card-hover);
}

.box h3 {
    color: var(--primary);
    margin-bottom: 0.75rem;
    font-size: 1.3rem;
    display: flex;
    align-items: center;
    gap: 0.5rem;
}

.box p {
    color: var(--text-secondary);
    margin-bottom: 1rem;
    line-height: 1.8;
}

.box a {
    color: var(--primary);
    text-decoration: none;
    font-weight: 500;
    transition: all 0.3s ease;
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
}

.box a:hover {
    color: var(--primary-dark);
    text-shadow: 0 0 10px var(--shadow);
}

/* Code Blocks */
code {
    display: block;
    background: var(--bg-darker);
    padding: 1rem;
    margin: 1rem 0;
    color: var(--primary);
    border-radius: 8px;
    font-family: 'Courier New', monospace;
    border: 1px solid var(--border);
    overflow-x: auto;
    position: relative;
}

code::before {
    content: '$';
    color: var(--primary-dark);
    margin-right: 0.5rem;
}

/* Images */
img {
    max-width: 100%;
    border-radius: 12px;
    margin-top: 1rem;
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.5);
    transition: transform 0.3s ease;
}

img:hover {
    transform: scale(1.02);
}

/* Tool Grid */
.tools-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: 1.5rem;
    margin-top: 1.5rem;
}

.tool-card {
    background: var(--bg-card);
    padding: 1.5rem;
    border-radius: 12px;
    border: 1px solid var(--border);
    transition: all 0.3s ease;
    cursor: pointer;
}

.tool-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 8px 25px var(--shadow);
    border-color: var(--primary);
}

.tool-card h3 {
    color: var(--primary);
    margin-bottom: 0.5rem;
    display: flex;
    align-items: center;
    gap: 0.5rem;
}

.tool-card p {
    color: var(--text-secondary);
    font-size: 0.9rem;
    margin-bottom: 1rem;
}

/* Terminal Simulator - Full Screen Style */
section#terminal {
    padding: 0 !important;
    max-width: 100% !important;
    margin: 0 !important;
    height: calc(100vh - 160px);
    display: flex;
    flex-direction: column;
    background: #000;
    position: relative;
}

section#terminal.active {
    display: flex !important;
}

@media (max-width: 768px) {
    section#terminal {
        height: calc(100vh - 140px);
    }
}

.terminal {
    background: #000;
    border-radius: 0;
    padding: 0;
    margin: 0;
    font-family: 'Courier New', monospace;
    box-shadow: none;
    height: 100%;
    display: flex;
    flex-direction: column;
}

.terminal-header {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    padding: 0.75rem 1rem;
    background: #0a0a0a;
    border-bottom: 1px solid var(--border);
    flex-shrink: 0;
}

.terminal-dot {
    width: 12px;
    height: 12px;
    border-radius: 50%;
    background: #ff5f56;
}

.terminal-dot:nth-child(2) {
    background: #ffbd2e;
}

.terminal-dot:nth-child(3) {
    background: #27c93f;
}

.terminal-window {
    background: #020202;
    border-radius: 0;
    border: none;
    padding: 1rem 1.25rem;
    flex: 1;
    overflow-y: auto;
    color: var(--primary);
    line-height: 1.8;
    font-size: 0.95rem;
    min-height: 0;
}

@media (max-width: 768px) {
    section#terminal {
        height: calc(100vh - 140px);
    }
    .terminal-window {
        padding: 0.75rem 1rem;
        font-size: 0.85rem;
    }
}

@keyframes blink {
    0%, 50% { opacity: 1; }
    51%, 100% { opacity: 0; }
}

.terminal-line {
    white-space: pre-wrap;
    font-size: 0.95rem;
}

.terminal-input-row {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    margin-top: 0;
    padding: 0.75rem 1rem;
    background: #0a0a0a;
    border-radius: 0;
    border-top: none;
    border-bottom: 1px solid var(--border);
    border-left: none;
    border-right: none;
    box-shadow: none;
    flex-shrink: 0;
}

.terminal-prompt {
    color: var(--primary-dark);
    font-family: 'Courier New', monospace;
}

.terminal-input {
    flex: 1;
    background: #050505;
    border: 1px solid var(--border);
    border-radius: 6px;
    padding: 0.6rem 0.9rem;
    color: var(--text-primary);
    font-family: 'Courier New', monospace;
    font-size: 0.95rem;
    font-size: 0.95rem;
}

.terminal-input:focus {
    outline: none;
    border-color: var(--primary);
}

/* Command List */
.command-list {
    display: grid;
    gap: 1rem;
    margin-top: 1rem;
}

.command-item {
    background: var(--bg-card);
    padding: 1rem;
    border-radius: 8px;
    border-left: 3px solid var(--primary);
    transition: all 0.3s ease;
}

.command-item:hover {
    background: var(--bg-card-hover);
    transform: translateX(5px);
}

/* Footer */
footer {
    text-align: center;
    padding: 2rem 1rem;
    background: var(--bg-dark);
    margin-top: 3rem;
    border-top: 1px solid var(--border);
    color: var(--text-secondary);
}

/* Theme Toggle */
.theme-toggle {
    position: fixed;
    bottom: 2rem;
    right: 2rem;
    width: 50px;
    height: 50px;
    border-radius: 50%;
    background: var(--gradient);
    border: none;
    color: #000;
    font-size: 1.2rem;
    cursor: pointer;
    box-shadow: 0 4px 15px var(--shadow);
    transition: all 0.3s ease;
    z-index: 1000;
}

.theme-toggle:hover {
    transform: scale(1.1) rotate(180deg);
}

/* Responsive Design */
@media (max-width: 768px) {
    nav {
        top: auto;
        position: relative;
    }
    
    nav button {
        flex: 1;
        min-width: 120px;
        font-size: 0.85rem;
        padding: 0.6rem 1rem;
    }
    
    header {
        padding: 1.5rem 1rem;
    }
    
    .tools-grid {
        grid-template-columns: 1fr;
    }
    
    .theme-toggle {
        bottom: 1rem;
        right: 1rem;
        width: 45px;
        height: 45px;
    }
}

@media (max-width: 480px) {
    section {
        padding: 1rem 0.5rem;
    }
    
    .box {
        padding: 1rem;
    }
    
    nav button {
        font-size: 0.75rem;
        padding: 0.5rem 0.75rem;
    }
}

/* Scrollbar Styling */
::-webkit-scrollbar {
    width: 10px;
}

::-webkit-scrollbar-track {
    background: var(--bg-dark);
}

::-webkit-scrollbar-thumb {
    background: var(--primary);
    border-radius: 5px;
}

::-webkit-scrollbar-thumb:hover {
    background: var(--primary-dark);
}

/* Loading Animation */
.loading {
    display: inline-block;
    width: 20px;
    height: 20px;
    border: 3px solid var(--border);
    border-radius: 50%;
    border-top-color: var(--primary);
    animation: spin 1s ease-in-out infinite;
}

@keyframes spin {
    to { transform: rotate(360deg); }
}

/* Copy Button */
.copy-btn {
    position: absolute;
    top: 0.5rem;
    right: 0.5rem;
    background: var(--bg-card);
    border: 1px solid var(--border);
    color: var(--primary);
    padding: 0.25rem 0.5rem;
    border-radius: 4px;
    cursor: pointer;
    font-size: 0.75rem;
    transition: all 0.3s ease;
}

.copy-btn:hover {
    background: var(--primary);
    color: #000;
}

code {
    position: relative;
    padding-right: 3rem;
}

/* Page Loader */
.page-loader {
    position: fixed;
    inset: 0;
    background: radial-gradient(circle at 20% 20%, rgba(0,255,153,0.08), transparent 35%), #000;
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 2000;
    backdrop-filter: blur(3px);
    padding: 1rem;
}

.page-loader.hidden {
    display: none;
}

.boot-terminal {
    width: min(720px, 95vw);
    background: #050505;
    border: 1px solid var(--border);
    border-radius: 14px;
    box-shadow: 0 20px 60px rgba(0,0,0,0.6);
    padding: 1.25rem;
    font-family: "JetBrains Mono", "Fira Code", monospace;
    color: var(--text-primary);
}

.boot-header {
    color: var(--primary);
    font-weight: 700;
    margin-bottom: 0.75rem;
    display: flex;
    align-items: center;
    gap: 0.5rem;
    letter-spacing: 0.5px;
}

.boot-lines {
    background: #000;
    border: 1px solid var(--border);
    border-radius: 10px;
    height: 260px;
    overflow: hidden;
    padding: 0.75rem 1rem;
    display: flex;
    flex-direction: column;
    gap: 0.25rem;
    box-shadow: inset 0 0 0 1px rgba(0,255,153,0.05);
}

.boot-line {
    font-size: 0.95rem;
    color: var(--text-secondary);
    white-space: pre-wrap;
}

.boot-line.ok::before {
    content: "[ OK ] ";
    color: var(--primary);
    font-weight: 700;
}

.boot-progress {
    margin-top: 0.9rem;
    height: 12px;
    background: #0f0f0f;
    border: 1px solid var(--border);
    border-radius: 999px;
    overflow: hidden;
}

.boot-progress-bar {
    height: 100%;
    width: 0%;
    background: var(--gradient);
    box-shadow: 0 0 12px var(--shadow);
    transition: width 0.25s ease;
}

.boot-footer {
    margin-top: 0.6rem;
    text-align: right;
    color: var(--primary);
    font-weight: 700;
    letter-spacing: 0.8px;
    text-transform: uppercase;
    font-size: 0.95rem;
}

.feature-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
    gap: 1rem;
    margin-top: 1.25rem;
}

.feature {
    padding: 1rem;
    border-radius: 12px;
    border: 1px solid var(--border);
    background: var(--bg-card);
    transition: all 0.3s ease;
}

.feature:hover {
    transform: translateY(-3px);
    box-shadow: 0 4px 15px var(--shadow);
    border-color: var(--primary);
}

.feature h3 {
    color: var(--primary);
    margin-bottom: 0.5rem;
    display: flex;
    align-items: center;
    gap: 0.5rem;
}

/* Commands section */
.command-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
    gap: 1rem;
}

.command-card {
    background: var(--bg-card);
    border: 1px solid var(--border);
    border-radius: 10px;
    padding: 1rem;
    transition: all 0.25s ease;
}

.command-card:hover {
    border-color: var(--primary);
    box-shadow: 0 4px 16px var(--shadow);
}

.command-card h3 {
    color: var(--primary);
    margin-bottom: 0.5rem;
    display: flex;
    align-items: center;
    gap: 0.5rem;
}

.command-card p {
    color: var(--text-secondary);
    margin-bottom: 0.5rem;
}

/* DarkkAI chatbot */
.chat-card {
    background: var(--bg-card);
    border: 1px solid var(--border);
    border-radius: 12px;
    padding: 1rem;
    box-shadow: 0 4px 16px rgba(0,0,0,0.4);
}

.chat-row {
    display: flex;
    gap: 0.75rem;
    align-items: center;
    margin-top: 1rem;
}

.chat-input {
    flex: 1;
    background: #0a0a0a;
    border: 1px solid var(--border);
    border-radius: 8px;
    padding: 0.8rem 1rem;
    color: var(--text-primary);
}

.chat-input:focus {
    outline: none;
    border-color: var(--primary);
    box-shadow: 0 0 12px var(--shadow);
}

.chat-results {
    margin-top: 1rem;
    display: grid;
    gap: 0.75rem;
}

.chat-result {
    padding: 0.9rem;
    background: var(--bg-dark);
    border: 1px solid var(--border);
    border-radius: 8px;
}
</style>
</head>

<body>

<header>
    <h1>
        <i class="fas fa-terminal"></i>
        Kali18 Security Hub
    </h1>
    <p>All Kali Linux Tools ‚Ä¢ Installation ‚Ä¢ Commands ‚Ä¢ Downloads</p>
</header>

<nav>
    <button onclick="show('home')" class="active" id="nav-home">
        <i class="fas fa-home"></i> Home
    </button>
    <button onclick="show('install')" id="nav-install">
        <i class="fas fa-download"></i> Install Kali
    </button>
    <button onclick="show('tools')" id="nav-tools">
        <i class="fas fa-tools"></i> Kali Tools
    </button>
    <button onclick="show('terminal')" id="nav-terminal">
        <i class="fas fa-terminal"></i> Terminal
    </button>
    <button onclick="show('commands')" id="nav-commands">
        <i class="fas fa-code"></i> Commands
    </button>
    <button onclick="show('darkkai')" id="nav-darkkai">
        <i class="fas fa-robot"></i> DarkkAI
    </button>
    <button onclick="show('profile')" id="nav-profile" style="display:none;">
        <i class="fas fa-user"></i> Profile
    </button>
    <button onclick="toggleSearch()" id="nav-search">
        <i class="fas fa-search"></i> Search
    </button>
</nav>

<div class="search-container" id="searchContainer">
    <input type="text" class="search-box" id="searchBox" placeholder="Search tools, commands, or topics..." onkeyup="performSearch()">
</div>

<div id="pageLoader" class="page-loader hidden">
    <div class="boot-terminal">
        <div class="boot-header" id="bootHeader">Kali Linux Secure Boot</div>
        <div class="boot-lines" id="bootLines"></div>
        <div class="boot-progress">
            <div class="boot-progress-bar" id="bootProgressBar"></div>
        </div>
        <div class="boot-footer">kali18</div>
    </div>
</div>

<section id="home" class="active">
    <div class="hero">
        <div class="hero-left">
            <div class="hero-badge"><i class="fas fa-bolt"></i> Kali18 ‚Ä¢ Modern Linux UI</div>
            <h1>Secure. Modern. Responsive.</h1>
            <p>Kali18 brings a sleek, terminal-inspired experience with quick access to installs, tools, and commands‚Äîbuilt to be fast, mobile-friendly, and focused on what matters.</p>
            <div class="hero-actions">
                <button class="btn primary" onclick="show('install')"><i class="fas fa-download"></i> Install Kali</button>
                <button class="btn" onclick="show('tools')"><i class="fas fa-tools"></i> Explore Tools</button>
                <button class="btn" onclick="googleSignIn()"><i class="fab fa-google"></i> Sign in with Google</button>
            </div>
            <div class="hero-stats">
                <div class="stat-card">
                    <div class="stat-number">600+</div>
                    <div class="stat-label">Security Tools</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number">100%</div>
                    <div class="stat-label">Linux Powered</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number">24/7</div>
                    <div class="stat-label">Community Support</div>
                </div>
            </div>
        </div>
        <div class="hero-right auth-card">
            <div class="glow"></div>
            <div class="auth-status">
                <span class="status-dot" id="statusDot"></span>
                <div>
                    <strong id="authStatus">Signed out</strong>
                    <div style="color: var(--text-secondary); font-size: 0.9rem;">Only Google sign-in is allowed.</div>
                </div>
            </div>
            <h3><i class="fab fa-google"></i> Continue with Google</h3>
            <p style="color: var(--text-secondary);">Click below to authenticate via Google and load your profile. No other login methods are enabled.</p>
            <div id="googleSignInButton" style="width: 100%; display: flex; justify-content: center; margin: 1rem 0;"></div>
            <div class="profile-card" id="profileCard" style="display:none;">
                <img id="profileAvatar" class="avatar" alt="Profile">
                <div class="profile-details">
                    <strong id="profileName">User</strong>
                    <small id="profileEmail">email</small>
                    <div class="pill"><i class="fas fa-id-badge"></i> Google Account</div>
                </div>
            </div>
        </div>
    </div>

    <div class="feature-grid">
        <div class="feature">
            <h3><i class="fas fa-lock"></i> Hardened Defaults</h3>
            <p style="color: var(--text-secondary);">Secure-by-default configs with a clean, Linux-inspired UI to reduce distractions.</p>
        </div>
        <div class="feature">
            <h3><i class="fas fa-mobile-alt"></i> Fully Responsive</h3>
            <p style="color: var(--text-secondary);">Optimized for mobile and desktop with fluid grids and touch-friendly controls.</p>
        </div>
        <div class="feature">
            <h3><i class="fas fa-microchip"></i> Fast Access</h3>
            <p style="color: var(--text-secondary);">Jump straight to installs, commands, and tools without scrolling clutter.</p>
        </div>
        <div class="feature">
            <h3><i class="fas fa-cloud-download-alt"></i> Smart Loading</h3>
            <p style="color: var(--text-secondary);">New loading animation keeps users informed during sign-in or data fetch.</p>
        </div>
    </div>

    <div class="box" style="margin-top: 2rem; background: linear-gradient(135deg, rgba(0,255,153,0.05) 0%, rgba(0,255,153,0.02) 100%); border: 2px solid var(--primary);">
        <h3 style="display: flex; align-items: center; gap: 0.75rem; margin-bottom: 1rem;">
            <i class="fas fa-terminal" style="color: var(--primary);"></i>
            Try Virtual Terminal
        </h3>
        <p style="color: var(--text-secondary); margin-bottom: 1rem;">Experience a real Kali Linux terminal in your browser. Type commands and see realistic outputs!</p>
        <div class="terminal" style="margin-top: 1rem; max-width: 100%;">
            <div class="terminal-header">
                <div class="terminal-dot"></div>
                <div class="terminal-dot"></div>
                <div class="terminal-dot"></div>
                <span style="margin-left: 1rem; color: var(--text-secondary); font-size: 0.9rem;">kali@kali:~</span>
            </div>
            <div class="terminal-window" id="homeTerminal" style="height: 200px;">
                <div class="terminal-line"><span class="terminal-prompt">kali@kali:~$</span> <span style="animation: blink 1s infinite;">_</span></div>
            </div>
            <div class="terminal-input-row">
                <span class="terminal-prompt">kali@kali:~$</span>
                <input id="homeTerminalInput" class="terminal-input" type="text" placeholder="Try: ls, pwd, whoami, help..." onkeydown="handleHomeTerminalKey(event)" onclick="show('terminal')" style="cursor: pointer;" />
            </div>
        </div>
        <button class="btn primary" onclick="show('terminal')" style="margin-top: 1rem; width: 100%;">
            <i class="fas fa-terminal"></i> Open Full Terminal
        </button>
    </div>
</section>

<section id="darkkai">
    <h2><i class="fas fa-robot"></i> DarkkAI Chatbot</h2>
    <div class="chat-card">
        <p style="color: var(--text-secondary);">DarkkAI can search the web (best-effort) and show quick answers. Enter your query below.</p>
        <div class="chat-row">
            <input id="darkkAiInput" class="chat-input" type="text" placeholder="Ask DarkkAI... (e.g., latest Kali release, how to install nmap)" onkeydown="if(event.key==='Enter') searchDarkkAI();" />
            <button class="btn primary" onclick="searchDarkkAI()"><i class="fas fa-paper-plane"></i> Ask</button>
        </div>
        <div id="darkkAiStatus" style="color: var(--text-secondary); margin-top: 0.5rem;"></div>
        <div class="chat-results" id="darkkAiResults"></div>
    </div>
</section>

<section id="install">
    <h2><i class="fas fa-download"></i> Kali Linux Installation</h2>

    <div class="box">
        <h3><i class="fas fa-cube"></i> Install in VirtualBox</h3>
        <p>VirtualBox is the safest way to run Kali Linux without affecting your main system.</p>
        <ol style="color: var(--text-secondary); margin-left: 1.5rem; line-height: 2;">
            <li>Download Kali Linux VirtualBox image from official website</li>
            <li>Import the OVA file into VirtualBox</li>
            <li>Start the virtual machine</li>
            <li>Login with default credentials</li>
        </ol>
        <a href="https://www.kali.org/get-kali/" target="_blank">
            <i class="fas fa-external-link-alt"></i> Download Kali Linux
        </a>
        <code>
kali@kali:~$ Default Credentials
Username: kali  
Password: kali
        </code>
        <img src="https://www.kali.org/images/kali-linux-vm.png" alt="Kali Linux VM" onerror="this.onerror=null;this.src='https://via.placeholder.com/600x400/00ff99/000000?text=Kali+Linux+VM';">
    </div>

    <div class="box">
        <h3><i class="fas fa-hdd"></i> Install on Main System (Dual Boot)</h3>
        <p>For advanced users who want to install Kali Linux alongside their existing OS.</p>
        <ol style="color: var(--text-secondary); margin-left: 1.5rem; line-height: 2;">
            <li>Download Kali Linux ISO image</li>
            <li>Use Rufus (Windows) or dd (Linux/Mac) to create bootable USB</li>
            <li>Boot from USB drive</li>
            <li>Select "Graphical Install" from boot menu</li>
            <li>Follow the installation wizard</li>
        </ol>
        <code>
Boot Menu ‚Üí USB Drive ‚Üí Graphical Install
        </code>
        <img src="https://www.kali.org/images/installer/kali-installer.png" alt="Kali Installer" onerror="this.onerror=null;this.src='https://via.placeholder.com/600x400/00ff99/000000?text=Kali+Installer';">
    </div>

    <div class="box">
        <h3><i class="fas fa-cloud"></i> Install on Cloud</h3>
        <p>Run Kali Linux on cloud platforms like AWS, Azure, or Google Cloud.</p>
        <code>
# AWS EC2 Instance
# Select Kali Linux AMI from marketplace
# Launch instance with appropriate security groups
        </code>
    </div>
</section>

<section id="tools">
    <h2><i class="fas fa-tools"></i> Kali Linux Security Tools</h2>

    <div class="box" style="background: linear-gradient(135deg, rgba(0,255,153,0.08) 0%, rgba(0,255,153,0.02) 100%); border: 2px solid var(--primary);">
        <h3 style="color: var(--primary); margin-bottom: 0.5rem;"><i class="fas fa-info-circle"></i> 40+ Professional Security Tools</h3>
        <p style="color: var(--text-secondary);">Complete collection of Kali Linux tools organized by category. Click any tool to track usage in your profile.</p>
    </div>

    <h3 style="color: var(--primary); margin-top: 2rem; margin-bottom: 1rem; display: flex; align-items: center; gap: 0.5rem;">
        <span style="background: var(--primary); color: #000; padding: 0.25rem 0.6rem; border-radius: 6px; font-size: 0.9rem;">üî∞</span>
        INFORMATION GATHERING (Recon) ‚Äì Beginner Friendly
    </h3>
    <div class="tools-grid">
        <div class="tool-card" onclick="trackToolUsage('Nmap')">
            <h3><i class="fas fa-network-wired"></i> 1Ô∏è‚É£ Nmap</h3>
            <p><strong>‡§ï‡§æ‡§Æ:</strong> Network scan, ports, services</p>
        <code>sudo apt install nmap</code>
            <code>nmap target_ip</code>
            <code>nmap -sV target_ip</code>
        <code>nmap -A target_ip</code>
        </div>
        <div class="tool-card" onclick="trackToolUsage('Whois')">
            <h3><i class="fas fa-globe"></i> 2Ô∏è‚É£ Whois</h3>
            <p><strong>‡§ï‡§æ‡§Æ:</strong> Domain owner info</p>
            <code>sudo apt install whois</code>
            <code>whois example.com</code>
        </div>
        <div class="tool-card" onclick="trackToolUsage('WhatWeb')">
            <h3><i class="fas fa-search"></i> 3Ô∏è‚É£ WhatWeb</h3>
            <p><strong>‡§ï‡§æ‡§Æ:</strong> Website technology detect</p>
            <code>sudo apt install whatweb</code>
            <code>whatweb site.com</code>
        </div>
        <div class="tool-card" onclick="trackToolUsage('theHarvester')">
            <h3><i class="fas fa-envelope"></i> 4Ô∏è‚É£ theHarvester</h3>
            <p><strong>‡§ï‡§æ‡§Æ:</strong> Emails, subdomains</p>
            <code>sudo apt install theharvester</code>
            <code>theHarvester -d site.com -b google</code>
        </div>
        <div class="tool-card" onclick="trackToolUsage('DNSenum')">
            <h3><i class="fas fa-server"></i> 5Ô∏è‚É£ DNSenum</h3>
            <p><strong>‡§ï‡§æ‡§Æ:</strong> DNS enumeration</p>
            <code>sudo apt install dnsenum</code>
            <code>dnsenum site.com</code>
        </div>
    </div>

    <h3 style="color: var(--primary); margin-top: 2rem; margin-bottom: 1rem; display: flex; align-items: center; gap: 0.5rem;">
        <span style="background: var(--primary); color: #000; padding: 0.25rem 0.6rem; border-radius: 6px; font-size: 0.9rem;">üü°</span>
        VULNERABILITY ANALYSIS
    </h3>
    <div class="tools-grid">
        <div class="tool-card" onclick="trackToolUsage('Nikto')">
            <h3><i class="fas fa-shield-alt"></i> 6Ô∏è‚É£ Nikto</h3>
            <p><strong>‡§ï‡§æ‡§Æ:</strong> Web vulnerabilities</p>
            <code>sudo apt install nikto</code>
            <code>nikto -h http://site.com</code>
        </div>
        <div class="tool-card" onclick="trackToolUsage('Nuclei')">
            <h3><i class="fas fa-bolt"></i> 7Ô∏è‚É£ Nuclei</h3>
            <p><strong>‡§ï‡§æ‡§Æ:</strong> Fast vulnerability scanner</p>
            <code>sudo apt install nuclei</code>
            <code>nuclei -u site.com</code>
        </div>
        <div class="tool-card" onclick="trackToolUsage('OpenVAS')">
            <h3><i class="fas fa-search-plus"></i> 8Ô∏è‚É£ OpenVAS (GVM)</h3>
            <p><strong>‡§ï‡§æ‡§Æ:</strong> Full vulnerability scan</p>
            <code>sudo apt install gvm</code>
            <code>gvm-setup</code>
            <code>gvm-start</code>
        </div>
    </div>

    <h3 style="color: var(--primary); margin-top: 2rem; margin-bottom: 1rem; display: flex; align-items: center; gap: 0.5rem;">
        <span style="background: var(--primary); color: #000; padding: 0.25rem 0.6rem; border-radius: 6px; font-size: 0.9rem;">üîµ</span>
        WEB ATTACK TOOLS
    </h3>
    <div class="tools-grid">
        <div class="tool-card" onclick="trackToolUsage('Burp Suite')">
            <h3><i class="fas fa-bug"></i> 9Ô∏è‚É£ Burp Suite</h3>
            <p><strong>‡§ï‡§æ‡§Æ:</strong> Web request intercept</p>
            <code>burpsuite</code>
        </div>
        <div class="tool-card" onclick="trackToolUsage('Dirb')">
            <h3><i class="fas fa-folder-open"></i> üîü Dirb</h3>
            <p><strong>‡§ï‡§æ‡§Æ:</strong> Hidden directories</p>
            <code>sudo apt install dirb</code>
            <code>dirb http://site.com</code>
        </div>
        <div class="tool-card" onclick="trackToolUsage('Gobuster')">
            <h3><i class="fas fa-search"></i> 1Ô∏è‚É£1Ô∏è‚É£ Gobuster</h3>
            <p><strong>‡§ï‡§æ‡§Æ:</strong> Directory brute force</p>
            <code>sudo apt install gobuster</code>
            <code>gobuster dir -u http://site.com -w wordlist.txt</code>
        </div>
        <div class="tool-card" onclick="trackToolUsage('SQLMap')">
            <h3><i class="fas fa-database"></i> 1Ô∏è‚É£2Ô∏è‚É£ SQLmap</h3>
            <p><strong>‡§ï‡§æ‡§Æ:</strong> SQL Injection</p>
            <code>sudo apt install sqlmap</code>
            <code>sqlmap -u "http://site.com?id=1" --dbs</code>
        </div>
    </div>

    <h3 style="color: var(--primary); margin-top: 2rem; margin-bottom: 1rem; display: flex; align-items: center; gap: 0.5rem;">
        <span style="background: var(--primary); color: #000; padding: 0.25rem 0.6rem; border-radius: 6px; font-size: 0.9rem;">üîê</span>
        PASSWORD ATTACK TOOLS
    </h3>
    <div class="tools-grid">
        <div class="tool-card" onclick="trackToolUsage('Hydra')">
            <h3><i class="fas fa-key"></i> 1Ô∏è‚É£3Ô∏è‚É£ Hydra</h3>
            <p><strong>‡§ï‡§æ‡§Æ:</strong> Password brute force</p>
        <code>sudo apt install hydra</code>
        <code>hydra -l user -P pass.txt target ssh</code>
        </div>
        <div class="tool-card" onclick="trackToolUsage('John the Ripper')">
            <h3><i class="fas fa-unlock"></i> 1Ô∏è‚É£4Ô∏è‚É£ John the Ripper</h3>
            <p><strong>‡§ï‡§æ‡§Æ:</strong> Password cracker</p>
            <code>sudo apt install john</code>
            <code>john hash.txt</code>
        </div>
        <div class="tool-card" onclick="trackToolUsage('Hashcat')">
            <h3><i class="fas fa-lock"></i> 1Ô∏è‚É£5Ô∏è‚É£ Hashcat</h3>
            <p><strong>‡§ï‡§æ‡§Æ:</strong> Advanced hash cracking</p>
            <code>sudo apt install hashcat</code>
            <code>hashcat -m 0 hash.txt wordlist.txt</code>
        </div>
        <div class="tool-card" onclick="trackToolUsage('Crunch')">
            <h3><i class="fas fa-cogs"></i> 1Ô∏è‚É£6Ô∏è‚É£ Crunch</h3>
            <p><strong>‡§ï‡§æ‡§Æ:</strong> Wordlist generate</p>
            <code>sudo apt install crunch</code>
            <code>crunch 6 8 abc123 > pass.txt</code>
        </div>
    </div>

    <h3 style="color: var(--primary); margin-top: 2rem; margin-bottom: 1rem; display: flex; align-items: center; gap: 0.5rem;">
        <span style="background: var(--primary); color: #000; padding: 0.25rem 0.6rem; border-radius: 6px; font-size: 0.9rem;">üì°</span>
        WIRELESS HACKING TOOLS
    </h3>
    <div class="tools-grid">
        <div class="tool-card" onclick="trackToolUsage('Airmon-ng')">
            <h3><i class="fas fa-wifi"></i> 1Ô∏è‚É£7Ô∏è‚É£ Airmon-ng</h3>
            <p><strong>‡§ï‡§æ‡§Æ:</strong> Enable monitor mode</p>
            <code>sudo apt install aircrack-ng</code>
            <code>airmon-ng start wlan0</code>
        </div>
        <div class="tool-card" onclick="trackToolUsage('Airodump-ng')">
            <h3><i class="fas fa-signal"></i> 1Ô∏è‚É£8Ô∏è‚É£ Airodump-ng</h3>
            <p><strong>‡§ï‡§æ‡§Æ:</strong> Capture WiFi packets</p>
            <code>airodump-ng wlan0mon</code>
        </div>
        <div class="tool-card" onclick="trackToolUsage('Aircrack-ng')">
            <h3><i class="fas fa-unlock-alt"></i> 1Ô∏è‚É£9Ô∏è‚É£ Aircrack-ng</h3>
            <p><strong>‡§ï‡§æ‡§Æ:</strong> Crack WiFi passwords</p>
            <code>aircrack-ng cap.cap -w wordlist.txt</code>
        </div>
        <div class="tool-card" onclick="trackToolUsage('Wifite')">
            <h3><i class="fas fa-wifi"></i> 2Ô∏è‚É£0Ô∏è‚É£ Wifite</h3>
            <p><strong>‡§ï‡§æ‡§Æ:</strong> Automated WiFi hacking</p>
            <code>sudo apt install wifite</code>
            <code>wifite</code>
        </div>
    </div>

    <h3 style="color: var(--primary); margin-top: 2rem; margin-bottom: 1rem; display: flex; align-items: center; gap: 0.5rem;">
        <span style="background: var(--primary); color: #000; padding: 0.25rem 0.6rem; border-radius: 6px; font-size: 0.9rem;">üß®</span>
        EXPLOITATION ‚Äì ADVANCED
    </h3>
    <div class="tools-grid">
        <div class="tool-card" onclick="trackToolUsage('Metasploit')">
            <h3><i class="fas fa-shield-alt"></i> 2Ô∏è‚É£1Ô∏è‚É£ Metasploit</h3>
            <p><strong>‡§ï‡§æ‡§Æ:</strong> Exploitation framework</p>
            <code>sudo apt install metasploit-framework</code>
            <code>msfconsole</code>
        </div>
        <div class="tool-card" onclick="trackToolUsage('Searchsploit')">
            <h3><i class="fas fa-search"></i> 2Ô∏è‚É£2Ô∏è‚É£ Searchsploit</h3>
            <p><strong>‡§ï‡§æ‡§Æ:</strong> Exploit database search</p>
            <code>sudo apt install exploitdb</code>
            <code>searchsploit apache</code>
        </div>
        <div class="tool-card" onclick="trackToolUsage('BeEF')">
            <h3><i class="fas fa-code"></i> 2Ô∏è‚É£3Ô∏è‚É£ BeEF</h3>
            <p><strong>‡§ï‡§æ‡§Æ:</strong> Browser exploitation</p>
            <code>sudo apt install beef-xss</code>
            <code>beef-xss</code>
        </div>
    </div>

    <h3 style="color: var(--primary); margin-top: 2rem; margin-bottom: 1rem; display: flex; align-items: center; gap: 0.5rem;">
        <span style="background: var(--primary); color: #000; padding: 0.25rem 0.6rem; border-radius: 6px; font-size: 0.9rem;">üïµÔ∏è</span>
        SNIFFING & SPOOFING
    </h3>
    <div class="tools-grid">
        <div class="tool-card" onclick="trackToolUsage('Wireshark')">
            <h3><i class="fas fa-eye"></i> 2Ô∏è‚É£4Ô∏è‚É£ Wireshark</h3>
            <p><strong>‡§ï‡§æ‡§Æ:</strong> Network packet analyzer</p>
        <code>sudo apt install wireshark</code>
        <code>wireshark</code>
        </div>
        <div class="tool-card" onclick="trackToolUsage('Tcpdump')">
            <h3><i class="fas fa-network-wired"></i> 2Ô∏è‚É£5Ô∏è‚É£ Tcpdump</h3>
            <p><strong>‡§ï‡§æ‡§Æ:</strong> Command-line packet capture</p>
            <code>tcpdump -i wlan0</code>
        </div>
        <div class="tool-card" onclick="trackToolUsage('Ettercap')">
            <h3><i class="fas fa-user-secret"></i> 2Ô∏è‚É£6Ô∏è‚É£ Ettercap</h3>
            <p><strong>‡§ï‡§æ‡§Æ:</strong> MITM attacks</p>
            <code>sudo apt install ettercap-graphical</code>
            <code>ettercap -G</code>
        </div>
    </div>

    <h3 style="color: var(--primary); margin-top: 2rem; margin-bottom: 1rem; display: flex; align-items: center; gap: 0.5rem;">
        <span style="background: var(--primary); color: #000; padding: 0.25rem 0.6rem; border-radius: 6px; font-size: 0.9rem;">üß¨</span>
        POST EXPLOITATION
    </h3>
    <div class="tools-grid">
        <div class="tool-card" onclick="trackToolUsage('Netcat')">
            <h3><i class="fas fa-terminal"></i> 2Ô∏è‚É£7Ô∏è‚É£ Netcat</h3>
            <p><strong>‡§ï‡§æ‡§Æ:</strong> Network utility</p>
            <code>sudo apt install netcat</code>
            <code>nc -lvnp 4444</code>
        </div>
        <div class="tool-card" onclick="trackToolUsage('Socat')">
            <h3><i class="fas fa-exchange-alt"></i> 2Ô∏è‚É£8Ô∏è‚É£ Socat</h3>
            <p><strong>‡§ï‡§æ‡§Æ:</strong> Advanced netcat</p>
            <code>sudo apt install socat</code>
            <code>socat TCP-LISTEN:4444 STDOUT</code>
        </div>
    </div>

    <h3 style="color: var(--primary); margin-top: 2rem; margin-bottom: 1rem; display: flex; align-items: center; gap: 0.5rem;">
        <span style="background: var(--primary); color: #000; padding: 0.25rem 0.6rem; border-radius: 6px; font-size: 0.9rem;">üß†</span>
        FORENSICS
    </h3>
    <div class="tools-grid">
        <div class="tool-card" onclick="trackToolUsage('Autopsy')">
            <h3><i class="fas fa-microscope"></i> 2Ô∏è‚É£9Ô∏è‚É£ Autopsy</h3>
            <p><strong>‡§ï‡§æ‡§Æ:</strong> Digital forensics</p>
            <code>sudo apt install autopsy</code>
            <code>autopsy</code>
        </div>
        <div class="tool-card" onclick="trackToolUsage('Binwalk')">
            <h3><i class="fas fa-file-archive"></i> 3Ô∏è‚É£0Ô∏è‚É£ Binwalk</h3>
            <p><strong>‡§ï‡§æ‡§Æ:</strong> Binary analysis</p>
            <code>sudo apt install binwalk</code>
            <code>binwalk file.img</code>
        </div>
    </div>

    <h3 style="color: var(--primary); margin-top: 2rem; margin-bottom: 1rem; display: flex; align-items: center; gap: 0.5rem;">
        <span style="background: var(--primary); color: #000; padding: 0.25rem 0.6rem; border-radius: 6px; font-size: 0.9rem;">üé≠</span>
        SOCIAL ENGINEERING
    </h3>
    <div class="tools-grid">
        <div class="tool-card" onclick="trackToolUsage('SET Toolkit')">
            <h3><i class="fas fa-user-ninja"></i> 3Ô∏è‚É£1Ô∏è‚É£ SET Toolkit</h3>
            <p><strong>‡§ï‡§æ‡§Æ:</strong> Social engineering attacks</p>
            <code>sudo apt install set</code>
            <code>setoolkit</code>
        </div>
    </div>

    <h3 style="color: var(--primary); margin-top: 2rem; margin-bottom: 1rem; display: flex; align-items: center; gap: 0.5rem;">
        <span style="background: var(--primary); color: #000; padding: 0.25rem 0.6rem; border-radius: 6px; font-size: 0.9rem;">‚öôÔ∏è</span>
        SYSTEM & SUPPORT TOOLS
    </h3>
    <div class="tools-grid">
        <div class="tool-card" onclick="trackToolUsage('ProxyChains')">
            <h3><i class="fas fa-link"></i> 3Ô∏è‚É£3Ô∏è‚É£ ProxyChains</h3>
            <p><strong>‡§ï‡§æ‡§Æ:</strong> Proxy routing</p>
            <code>sudo apt install proxychains</code>
            <code>proxychains nmap target</code>
        </div>
        <div class="tool-card" onclick="trackToolUsage('Tor')">
            <h3><i class="fas fa-user-secret"></i> 3Ô∏è‚É£4Ô∏è‚É£ Tor</h3>
            <p><strong>‡§ï‡§æ‡§Æ:</strong> Anonymous browsing</p>
            <code>sudo apt install tor</code>
            <code>service tor start</code>
        </div>
        <div class="tool-card" onclick="trackToolUsage('Amass')">
            <h3><i class="fas fa-sitemap"></i> 3Ô∏è‚É£5Ô∏è‚É£ Amass</h3>
            <p><strong>‡§ï‡§æ‡§Æ:</strong> Subdomain enumeration</p>
            <code>sudo apt install amass</code>
            <code>amass enum -d site.com</code>
        </div>
        <div class="tool-card" onclick="trackToolUsage('Recon-ng')">
            <h3><i class="fas fa-search"></i> 3Ô∏è‚É£6Ô∏è‚É£ Recon-ng</h3>
            <p><strong>‡§ï‡§æ‡§Æ:</strong> Reconnaissance framework</p>
            <code>sudo apt install recon-ng</code>
            <code>recon-ng</code>
        </div>
        <div class="tool-card" onclick="trackToolUsage('Enum4linux')">
            <h3><i class="fas fa-list"></i> 3Ô∏è‚É£7Ô∏è‚É£ Enum4linux</h3>
            <p><strong>‡§ï‡§æ‡§Æ:</strong> SMB enumeration</p>
            <code>sudo apt install enum4linux</code>
            <code>enum4linux target_ip</code>
        </div>
        <div class="tool-card" onclick="trackToolUsage('SMBclient')">
            <h3><i class="fas fa-server"></i> 3Ô∏è‚É£8Ô∏è‚É£ SMBclient</h3>
            <p><strong>‡§ï‡§æ‡§Æ:</strong> SMB protocol access</p>
            <code>smbclient -L target_ip</code>
        </div>
        <div class="tool-card" onclick="trackToolUsage('FTP')">
            <h3><i class="fas fa-file-upload"></i> 3Ô∏è‚É£9Ô∏è‚É£ FTP</h3>
            <p><strong>‡§ï‡§æ‡§Æ:</strong> FTP client</p>
            <code>ftp target_ip</code>
        </div>
        <div class="tool-card" onclick="trackToolUsage('SSH')">
            <h3><i class="fas fa-terminal"></i> 4Ô∏è‚É£0Ô∏è‚É£ SSH</h3>
            <p><strong>‡§ï‡§æ‡§Æ:</strong> Secure shell access</p>
            <code>ssh user@target_ip</code>
        </div>
    </div>
</section>

<section id="terminal">
    <div class="terminal">
        <div class="terminal-header">
            <div class="terminal-dot"></div>
            <div class="terminal-dot"></div>
            <div class="terminal-dot"></div>
            <span style="margin-left: 1rem; color: var(--text-secondary); font-size: 0.9rem;">kali@kali:~</span>
            <span style="margin-left: auto; color: var(--text-secondary); font-size: 0.85rem;">Kali18 Virtual Terminal</span>
        </div>
        <div class="terminal-input-row">
            <span class="terminal-prompt" id="terminalPrompt">kali@kali:~$</span>
            <input id="terminalInput" class="terminal-input" type="text" autofocus placeholder="Type any Kali Linux command..." onkeydown="handleTerminalKey(event)" />
        </div>
        <div class="terminal-window" id="virtualTerminal">
            <!-- command history will appear here -->
        </div>
    </div>
</section>

<section id="commands">
    <h2><i class="fas fa-code"></i> Essential Commands</h2>

    <div class="command-grid">
        <div class="command-card">
            <h3><i class="fas fa-folder"></i> File Basics</h3>
            <code>pwd        # current directory</code>
            <code>ls         # files list</code>
            <code>ls -l      # details</code>
            <code>ls -a      # hidden files</code>
            <code>cd folder  # folder me jao</code>
            <code>cd ..      # ek step piche</code>
            <code>cd ~       # home directory</code>
        </div>

        <div class="command-card">
            <h3><i class="fas fa-file-alt"></i> File Handling</h3>
            <code>touch file.txt        # file create</code>
            <code>cat file.txt          # file read</code>
            <code>nano file.txt         # editor</code>
            <code>vi file.txt</code>
            <code>cp a.txt b.txt        # copy</code>
            <code>mv a.txt b.txt        # move / rename</code>
            <code>rm file.txt           # delete</code>
            <code>rm -r foldername      # folder delete</code>
        </div>

        <div class="command-card">
            <h3><i class="fas fa-user-shield"></i> Users & Permissions</h3>
            <code>whoami          # current user</code>
            <code>id              # user details</code>
            <code>sudo command    # admin command</code>
            <code>sudo su         # root user (password: kali)</code>
            <code>passwd          # password change</code>
            <code>chmod 777 file.txt</code>
            <code>chmod +x script.sh</code>
            <code>chown user:user file.txt</code>
        </div>

        <div class="command-card">
            <h3><i class="fas fa-network-wired"></i> Network (Important)</h3>
            <code>ifconfig</code>
            <code>ip a</code>
            <code>ping google.com</code>
            <code>netstat -tuln</code>
            <code>ss -tuln</code>
            <code>traceroute google.com</code>
            <code>arp -a</code>
        </div>

        <div class="command-card">
            <h3><i class="fas fa-box"></i> APT Package Mgmt</h3>
            <code>apt update</code>
            <code>apt upgrade</code>
            <code>apt install toolname</code>
            <code>apt remove toolname</code>
            <code>apt autoremove</code>
        </div>

        <div class="command-card">
            <h3><i class="fas fa-microchip"></i> System & Process</h3>
            <code>top</code>
            <code>htop</code>
            <code>ps aux</code>
            <code>kill PID</code>
            <code>uptime</code>
            <code>df -h</code>
            <code>free -h</code>
            <code>uname -a</code>
        </div>

        <div class="command-card">
            <h3><i class="fas fa-search"></i> Search & Find</h3>
            <code>find / -name file.txt</code>
            <code>locate file.txt</code>
            <code>which python</code>
            <code>whereis nmap</code>
            <code>grep "root" file.txt</code>
        </div>

        <div class="command-card">
            <h3><i class="fas fa-terminal"></i> Shell & Scripts</h3>
            <code>history</code>
            <code>clear</code>
            <code>echo "Hello"</code>
            <code>bash script.sh</code>
            <code>./script.sh</code>
        </div>

        <div class="command-card">
            <h3><i class="fas fa-random"></i> Pipes & Redirects</h3>
            <code>ls | grep txt</code>
            <code>cat file.txt > new.txt</code>
            <code>cat file.txt >> new.txt</code>
        </div>

        <div class="command-card">
            <h3><i class="fas fa-clock"></i> Cron & Compression</h3>
            <code>crontab -e</code>
            <code>crontab -l</code>
            <code>zip file.zip file.txt</code>
            <code>unzip file.zip</code>
            <code>tar -cvf test.tar folder</code>
            <code>tar -xvf test.tar</code>
        </div>

        <div class="command-card">
            <h3><i class="fas fa-skull-crossbones"></i> Kali Hacking Tools</h3>
            <code>nmap target-ip</code>
            <code>nmap -A target-ip</code>
            <code>nmap -sV target-ip</code>
            <code>msfconsole</code>
            <code>hydra -l admin -P pass.txt ssh://target-ip</code>
            <code>sqlmap -u "url" --dbs</code>
            <code>sqlmap -u "url" --tables</code>
        </div>

        <div class="command-card">
            <h3><i class="fas fa-wifi"></i> Wireless Basics</h3>
            <code>iwconfig</code>
            <code>airmon-ng start wlan0</code>
            <code>airodump-ng wlan0mon</code>
            <code>aireplay-ng</code>
        </div>

        <div class="command-card">
            <h3><i class="fas fa-lightbulb"></i> Extra Useful</h3>
            <code>neofetch</code>
            <code>tree</code>
            <code>watch</code>
        </div>
    </div>
</section>

<section id="profile">
    <h2><i class="fas fa-user"></i> My Profile</h2>
    
    <div class="box" id="profileInfoBox" style="display:none;">
        <div style="display: flex; align-items: center; gap: 1.5rem; flex-wrap: wrap;">
            <img id="profileInfoAvatar" class="avatar" style="width: 80px; height: 80px;" alt="Profile">
            <div>
                <h3 id="profileInfoName" style="margin-bottom: 0.5rem;"></h3>
                <p id="profileInfoEmail" style="color: var(--text-secondary); margin-bottom: 0.5rem;"></p>
                <div class="pill"><i class="fas fa-id-badge"></i> Google Account</div>
            </div>
            <button class="btn" onclick="signOut()" style="margin-left: auto;">
                <i class="fas fa-sign-out-alt"></i> Sign Out
            </button>
        </div>
    </div>

    <div class="box" id="profileNotLoggedIn">
        <p style="color: var(--text-secondary); text-align: center; padding: 2rem;">
            <i class="fas fa-lock" style="font-size: 3rem; color: var(--primary); margin-bottom: 1rem; display: block;"></i>
            Please sign in with Google from the Home section to view your profile and tool usage history.
        </p>
    </div>

    <div class="box" id="toolHistoryBox" style="display:none;">
        <h3><i class="fas fa-history"></i> Tool Usage History</h3>
        <p style="color: var(--text-secondary); margin-bottom: 1rem;">Tools you've accessed on Kali18:</p>
        <div id="toolHistoryList" style="display: grid; gap: 0.75rem;">
            <!-- Tool history items injected here -->
        </div>
    </div>
</section>

<footer>
    <p>¬© 2026 | Kali Linux Guide | Made with <i class="fas fa-heart" style="color: var(--primary);"></i> for Security Professionals</p>
    <p style="margin-top: 0.5rem; font-size: 0.9rem;">
        <a href="https://www.kali.org" target="_blank" style="color: var(--primary); text-decoration: none;">
            <i class="fas fa-external-link-alt"></i> Official Kali Linux Website
        </a>
    </p>
</footer>

<button class="theme-toggle" onclick="scrollToTop()" title="Scroll to Top">
    <i class="fas fa-arrow-up"></i>
</button>

<script>
// Navigation
function show(id) {
    document.querySelectorAll("section").forEach(s => {
        s.classList.remove("active");
    });
    const target = document.getElementById(id);
    if (target) target.classList.add("active");
    
    // Update active nav button
    document.querySelectorAll("nav button").forEach(btn => {
        btn.classList.remove("active");
    });
    const navBtn = document.getElementById("nav-" + id);
    if (navBtn) navBtn.classList.add("active");
    
    // Scroll to top
    window.scrollTo({ top: 0, behavior: 'smooth' });
}

// Search functionality
let searchActive = false;

function toggleSearch() {
    const container = document.getElementById("searchContainer");
    const searchBox = document.getElementById("searchBox");
    
    if (searchActive) {
        container.classList.remove("active");
        searchBox.value = "";
        searchActive = false;
    } else {
        container.classList.add("active");
        searchBox.focus();
        searchActive = true;
    }
}

function performSearch() {
    const query = document.getElementById("searchBox").value.toLowerCase().trim();
    const sections = document.querySelectorAll("section");
    
    if (!query) {
        // Show all sections if search is empty
        sections.forEach(section => {
            section.style.display = "none";
            section.classList.remove("active");
        });
        // Show home by default
show('home');
        return;
    }
    
    let found = false;
    sections.forEach(section => {
        const content = section.textContent.toLowerCase();
        if (content.includes(query)) {
            section.style.display = "block";
            section.classList.add("active");
            found = true;
            
            // Update nav button
            const sectionId = section.id;
            document.querySelectorAll("nav button").forEach(btn => {
                btn.classList.remove("active");
            });
            const navBtn = document.getElementById("nav-" + sectionId);
            if (navBtn) navBtn.classList.add("active");
        } else {
            section.style.display = "none";
            section.classList.remove("active");
        }
    });
    
    if (!found) {
        // Show message if nothing found
        const homeSection = document.getElementById('home');
        if (homeSection) {
            homeSection.style.display = "block";
            homeSection.classList.add("active");
            homeSection.innerHTML = `
                <div class="box" style="text-align: center; padding: 3rem;">
                    <i class="fas fa-search" style="font-size: 3rem; color: var(--primary); margin-bottom: 1rem;"></i>
                    <h3 style="color: var(--primary); margin-bottom: 1rem;">No results found</h3>
                    <p style="color: var(--text-secondary);">Try searching for: tools, commands, nmap, metasploit, etc.</p>
                </div>
            `;
        }
    }
}

// Auth + profile state
let currentUser = null;
let toolHistory = JSON.parse(localStorage.getItem('kali18_tool_history') || '[]');

function showLoader(message = "Loading Kali18...") {
    const loader = document.getElementById('pageLoader');
    if (!loader) return;
    const header = document.getElementById('bootHeader');
    if (header) header.textContent = message;
    loader.classList.remove('hidden');
}

function hideLoader() {
    const loader = document.getElementById('pageLoader');
    if (!loader) return;
    loader.classList.add('hidden');
}

function renderProfile(profile) {
    const card = document.getElementById('profileCard');
    const name = document.getElementById('profileName');
    const email = document.getElementById('profileEmail');
    const avatar = document.getElementById('profileAvatar');
    const statusDot = document.getElementById('statusDot');
    const status = document.getElementById('authStatus');

    if (card && name && email && avatar && statusDot && status) {
        name.textContent = profile.name || 'User';
        email.textContent = profile.email || '';
        avatar.src = profile.picture || profile.avatar || 'https://ui-avatars.com/api/?name=' + encodeURIComponent((profile.name || 'U').charAt(0)) + '&background=00ff99&color=000&size=150';
        avatar.onerror = function () {
            this.src = 'https://ui-avatars.com/api/?name=' + encodeURIComponent((profile.name || 'U').charAt(0)) + '&background=00ff99&color=000&size=150';
        };
        status.textContent = "Signed in with Google";
        statusDot.classList.add('online');
        card.style.display = 'flex';
        
        // Hide sign-in button when logged in
        const signInButton = document.getElementById('googleSignInButton');
        if (signInButton) {
            signInButton.style.display = 'none';
        }
    }
}

function updateProfileSection() {
    const profileNav = document.getElementById('nav-profile');
    const profileInfoBox = document.getElementById('profileInfoBox');
    const profileNotLoggedIn = document.getElementById('profileNotLoggedIn');
    const toolHistoryBox = document.getElementById('toolHistoryBox');

    if (currentUser) {
        if (profileNav) profileNav.style.display = 'flex';
        if (profileInfoBox) {
            document.getElementById('profileInfoName').textContent = currentUser.name || 'User';
            document.getElementById('profileInfoEmail').textContent = currentUser.email || '';
            const avatarImg = document.getElementById('profileInfoAvatar');
            avatarImg.src = currentUser.picture || 'https://ui-avatars.com/api/?name=' + encodeURIComponent((currentUser.name || 'U').charAt(0)) + '&background=00ff99&color=000&size=150';
            avatarImg.onerror = function () {
                this.src = 'https://ui-avatars.com/api/?name=' + encodeURIComponent((currentUser.name || 'U').charAt(0)) + '&background=00ff99&color=000&size=150';
            };
            profileInfoBox.style.display = 'block';
        }
        if (profileNotLoggedIn) profileNotLoggedIn.style.display = 'none';
        if (toolHistoryBox) {
            toolHistoryBox.style.display = 'block';
            renderToolHistory();
        }
    } else {
        if (profileNav) profileNav.style.display = 'none';
        if (profileInfoBox) profileInfoBox.style.display = 'none';
        if (profileNotLoggedIn) profileNotLoggedIn.style.display = 'block';
        if (toolHistoryBox) toolHistoryBox.style.display = 'none';
    }
}

function renderToolHistory() {
    const historyList = document.getElementById('toolHistoryList');
    if (!historyList) return;

    if (!toolHistory.length) {
        historyList.innerHTML = '<p style="color: var(--text-secondary); text-align: center; padding: 1rem;">No tools used yet. Click on any tool card to build history.</p>';
        return;
    }

    historyList.innerHTML = toolHistory.map(item => `
        <div class="command-item" style="display:flex;justify-content:space-between;align-items:center;">
            <div>
                <strong style="color: var(--primary);">${item.tool}</strong>
                <div style="color: var(--text-secondary); font-size: 0.85rem; margin-top: 0.25rem;">
                    <i class="fas fa-clock"></i> ${new Date(item.timestamp).toLocaleString()}
                </div>
            </div>
            <div style="color: var(--text-secondary); font-size: 0.9rem;">
                ${item.count}x
            </div>
        </div>
    `).join('');
}

function trackToolUsage(toolName) {
    if (!currentUser) {
        alert('Please sign in with Google first to record your tool history.');
        return;
    }

    const existingIndex = toolHistory.findIndex(t => t.tool === toolName);
    if (existingIndex >= 0) {
        toolHistory[existingIndex].count += 1;
        toolHistory[existingIndex].timestamp = new Date().toISOString();
    } else {
        toolHistory.unshift({
            tool: toolName,
            count: 1,
            timestamp: new Date().toISOString()
        });
    }
    toolHistory = toolHistory.slice(0, 50);
    localStorage.setItem('kali18_tool_history', JSON.stringify(toolHistory));
    
    // Update history display if on profile page
    if (document.getElementById('profile').classList.contains('active')) {
        renderToolHistory();
    }
}

function clearHistory() {
    if (!currentUser) return;
    if (!confirm('Clear your tool usage history?')) return;
    toolHistory = [];
    localStorage.removeItem('kali18_tool_history');
    renderToolHistory();
}

function signOut() {
    if (!currentUser) return;
    if (!confirm('Sign out from this site?')) return;

    const email = currentUser.email;
    currentUser = null;
    localStorage.removeItem('kali18_user');

    const statusDot = document.getElementById('statusDot');
    const status = document.getElementById('authStatus');
    const card = document.getElementById('profileCard');
    const signInButton = document.getElementById('googleSignInButton');
    
    if (statusDot) statusDot.classList.remove('online');
    if (status) status.textContent = 'Signed out';
    if (card) card.style.display = 'none';
    if (signInButton) {
        signInButton.innerHTML = '';
        signInButton.style.display = 'flex';
    }

    if (window.google && google.accounts && google.accounts.id && email) {
        try {
            google.accounts.id.revoke(email, () => {});
        } catch (e) {
            console.warn('Revoke failed', e);
        }
    }

    updateProfileSection();
    
    // If on profile page, redirect to home
    if (document.getElementById('profile').classList.contains('active')) {
        show('home');
    }
}

// Handle real Google Identity response
function handleCredentialResponse(response) {
    showLoader('Authenticating with Google...');
    try {
        const payload = JSON.parse(atob(response.credential.split('.')[1]));
        currentUser = {
            name: payload.name,
            email: payload.email,
            picture: payload.picture
        };
        localStorage.setItem('kali18_user', JSON.stringify(currentUser));
        renderProfile(currentUser);
        updateProfileSection();
    } catch (e) {
        console.error('Failed to parse Google token', e);
        alert('Google sign-in failed. Please try again.');
    } finally {
        hideLoader();
    }
}

function initializeGoogleSignIn() {
    const btnContainer = document.getElementById('googleSignInButton');
    if (!btnContainer) return;
    
    // Show fallback button if Google API not available
    if (typeof google === 'undefined' || !google.accounts || !google.accounts.id) {
        // Wait a bit more for Google script to load
        setTimeout(() => {
            if (typeof google === 'undefined' || !google.accounts || !google.accounts.id) {
                // Show fallback button
                btnContainer.innerHTML = `
                    <button class="btn primary" style="width: 100%; justify-content: center;" onclick="googleSignIn()">
                        <i class="fab fa-google"></i> Sign in with Google
                    </button>
                `;
            } else {
                initializeGoogleSignIn();
            }
        }, 500);
        return;
    }

    // TODO: replace this with your real Google Client ID
    // Example: 1234567890-abcdefg.apps.googleusercontent.com
    const clientId = 'YOUR_GOOGLE_CLIENT_ID.apps.googleusercontent.com';
    if (clientId.startsWith('YOUR_GOOGLE_CLIENT_ID')) {
        // Show fallback button when no client ID
        btnContainer.innerHTML = `
            <button class="btn primary" style="width: 100%; justify-content: center;" onclick="googleSignIn()">
                <i class="fab fa-google"></i> Sign in with Google
            </button>
        `;
        return;
    }

    try {
        google.accounts.id.initialize({
            client_id: clientId,
            callback: handleCredentialResponse,
            auto_select: true,
            cancel_on_tap_outside: true
        });

        google.accounts.id.renderButton(btnContainer, {
            theme: 'outline',
            size: 'large',
            width: 260,
            text: 'signin_with',
            shape: 'pill'
        });
    } catch (e) {
        // Fallback on error
        btnContainer.innerHTML = `
            <button class="btn primary" style="width: 100%; justify-content: center;" onclick="googleSignIn()">
                <i class="fab fa-google"></i> Sign in with Google
            </button>
        `;
    }
}

function googleSignIn() {
    // Fallback: manually trigger Google account chooser if configured
    if (window.google && google.accounts && google.accounts.id) {
        try {
            google.accounts.id.prompt();
        } catch (e) {
            // Fallback to manual sign-in
            showManualGoogleSignIn();
        }
    } else {
        // Show manual sign-in modal
        showManualGoogleSignIn();
    }
}

function showManualGoogleSignIn() {
    showLoader('Opening Google Sign-In...');
    
    setTimeout(() => {
        hideLoader();
        
        // Create modal for manual Google sign-in
        const modal = document.createElement('div');
        modal.id = 'googleSignInModal';
        modal.style.cssText = `
            position: fixed;
            inset: 0;
            background: rgba(0,0,0,0.9);
            z-index: 3000;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 1rem;
        `;
        
        modal.innerHTML = `
            <div style="background: var(--bg-card); padding: 2rem; border-radius: 16px; 
                        max-width: 450px; width: 100%; border: 2px solid var(--primary);
                        box-shadow: 0 8px 32px rgba(0,255,153,0.2);">
                <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 1.5rem;">
                    <h3 style="color: var(--primary); display: flex; align-items: center; gap: 0.5rem;">
                        <i class="fab fa-google"></i> Sign in with Google
                    </h3>
                    <button onclick="document.getElementById('googleSignInModal').remove()" 
                            style="background: none; border: none; color: var(--text-secondary); 
                                   cursor: pointer; font-size: 1.5rem; padding: 0;">&times;</button>
                </div>
                <p style="color: var(--text-secondary); margin-bottom: 1.5rem; line-height: 1.6;">
                    Enter your Google account email to continue. Only Gmail accounts are allowed.
                </p>
                <input type="email" id="googleEmailInput" placeholder="your.email@gmail.com" 
                       style="width: 100%; padding: 0.85rem; background: var(--bg-darker); 
                              border: 2px solid var(--border); border-radius: 8px; 
                              color: var(--text-primary); margin-bottom: 1rem; font-size: 1rem;
                              transition: all 0.3s ease;"
                       onfocus="this.style.borderColor='var(--primary)'; this.style.boxShadow='0 0 20px var(--shadow)'"
                       onblur="this.style.borderColor='var(--border)'; this.style.boxShadow='none'">
                <div style="display: flex; gap: 0.75rem; justify-content: flex-end;">
                    <button onclick="document.getElementById('googleSignInModal').remove()" 
                            class="btn" style="margin: 0;">
                        Cancel
                    </button>
                    <button onclick="processManualGoogleSignIn()" 
                            class="btn primary" style="margin: 0;">
                        <i class="fab fa-google"></i> Sign In
                    </button>
                </div>
            </div>
        `;
        
        document.body.appendChild(modal);
        
        // Close on outside click
        modal.addEventListener('click', (e) => {
            if (e.target === modal) modal.remove();
        });
        
        // Handle Enter key
        const input = document.getElementById('googleEmailInput');
        if (input) {
            input.focus();
            input.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') processManualGoogleSignIn();
            });
        }
    }, 500);
}

function processManualGoogleSignIn() {
    const input = document.getElementById('googleEmailInput');
    const email = input?.value.trim();
    const modal = document.getElementById('googleSignInModal');
    
    if (!email || !email.includes('@gmail.com')) {
        alert('Please enter a valid Gmail address (e.g., deepeshjoshi018@gmail.com)');
        return;
    }
    
    showLoader('Authenticating...');
    if (modal) modal.remove();
    
    // Extract name from email
    const namePart = email.split('@')[0];
    const name = namePart.split('.').map(part => 
        part.charAt(0).toUpperCase() + part.slice(1)
    ).join(' ') || namePart;
    
    currentUser = {
        name: name,
        email: email,
        picture: `https://ui-avatars.com/api/?name=${encodeURIComponent(name)}&background=00ff99&color=000&size=150`
    };
    
    localStorage.setItem('kali18_user', JSON.stringify(currentUser));
    renderProfile(currentUser);
    updateProfileSection();
    hideLoader();
}

// DarkkAI web search (best effort using DuckDuckGo Instant Answer API)
async function searchDarkkAI() {
    const input = document.getElementById('darkkAiInput');
    const resultsEl = document.getElementById('darkkAiResults');
    const statusEl = document.getElementById('darkkAiStatus');
    if (!input || !resultsEl || !statusEl) return;

    const query = input.value.trim();
    if (!query) {
        statusEl.textContent = 'Please enter a query.';
        return;
    }

    statusEl.textContent = 'Searching...';
    resultsEl.innerHTML = '';

    const url = `https://api.duckduckgo.com/?q=${encodeURIComponent(query)}&format=json&no_redirect=1&no_html=1`;

    try {
        const res = await fetch(url);
        if (!res.ok) throw new Error('Network error');
        const data = await res.json();

        const snippets = [];
        if (data.AbstractText) snippets.push(data.AbstractText);
        if (data.RelatedTopics && data.RelatedTopics.length) {
            data.RelatedTopics.slice(0, 3).forEach(t => {
                if (t.Text) snippets.push(t.Text);
            });
        }

        if (!snippets.length) {
            resultsEl.innerHTML = `<div class="chat-result">No results found. Try a different query.</div>`;
        } else {
            resultsEl.innerHTML = snippets.map(s => `<div class="chat-result">${s}</div>`).join('');
        }
        statusEl.textContent = 'Results from DuckDuckGo (best effort).';
    } catch (e) {
        console.error(e);
        statusEl.textContent = 'Online search unavailable. Showing fallback result.';
        resultsEl.innerHTML = `<div class="chat-result">Fallback: Please try again later or check your internet connection.</div>`;
    }
}

// Kali-style boot animation loader
const bootMessages = [
    "Starting Kali Linux (kali18) ...",
    "Loading kernel modules ...",
    "Bringing up network interfaces ...",
    "Mounting filesystems ...",
    "Checking persistence layer ...",
    "Starting SSH service ...",
    "Starting NetworkManager ...",
    "Starting Bluetooth service ...",
    "Applying security policies ...",
    "Initializing display manager ...",
    "Preparing user session ...",
    "Loading Kali tools index ...",
    "Finalizing boot ..."
];

function startBootSequence() {
    const linesEl = document.getElementById('bootLines');
    const barEl = document.getElementById('bootProgressBar');
    if (!linesEl || !barEl) {
        hideLoader();
        return;
    }

    linesEl.innerHTML = '';
    barEl.style.width = '0%';
    showLoader("Kali Linux Secure Boot");

    let i = 0;
    const total = bootMessages.length;

    const step = () => {
        if (i >= total) {
            barEl.style.width = '100%';
            setTimeout(() => {
                hideLoader();
            }, 800);
            return;
        }
        const line = document.createElement('div');
        line.className = 'boot-line ok';
        line.textContent = bootMessages[i];
        linesEl.appendChild(line);
        linesEl.scrollTop = linesEl.scrollHeight;

        const pct = Math.min(100, Math.round(((i + 1) / total) * 100));
        barEl.style.width = pct + '%';
        i += 1;
        setTimeout(step, 200);
    };

    step();
}

// Virtual terminal implementation
const terminalState = {
    cwd: '~',
    history: [],
    historyIndex: -1,
    isRoot: false,
    waitingForPassword: false,
    passwordMode: null, // 'su', 'sudo', etc.
    files: {
        '~': ['Desktop', 'Documents', 'Downloads', 'Tools', 'notes.txt', '.hidden'],
        '~/Tools': ['nmap', 'metasploit', 'hydra', 'wireshark'],
        '~/Desktop': ['test.txt', 'script.sh'],
    },
};

const fakeFs = {
    '~': ['Desktop', 'Documents', 'Downloads', 'Tools', 'notes.txt'],
    '~/Tools': ['nmap', 'metasploit', 'hydra', 'wireshark'],
};

function appendTerminalLine(text = '', cls = '') {
    const win = document.getElementById('virtualTerminal');
    if (!win) return;
    const div = document.createElement('div');
    div.className = 'terminal-line' + (cls ? ' ' + cls : '');
    div.textContent = text;
    win.appendChild(div);
    win.scrollTop = win.scrollHeight;
}

function updateTerminalPrompt() {
    const promptEl = document.getElementById('terminalPrompt');
    const inputEl = document.getElementById('terminalInput');
    if (promptEl) {
        const user = terminalState.isRoot ? 'root' : 'kali';
        promptEl.textContent = `${user}@kali:${terminalState.cwd}${terminalState.isRoot ? '#' : '$'}`;
    }
    if (inputEl) {
        if (terminalState.waitingForPassword) {
            inputEl.type = 'password';
            inputEl.placeholder = 'Password:';
        } else {
            inputEl.type = 'text';
            inputEl.placeholder = 'Type any Kali Linux command...';
        }
    }
}

function printPromptedLine(command) {
    const user = terminalState.isRoot ? 'root' : 'kali';
    const prompt = terminalState.isRoot ? '#' : '$';
    appendTerminalLine(`${user}@kali:${terminalState.cwd}${prompt} ${command}`);
}

function handleCommand(cmdRaw) {
    const input = cmdRaw.trim();
    if (!input) return;

    printPromptedLine(input);

    const [command, ...args] = input.split(/\s+/);

    // Handle script execution (./script.sh)
    if (command.startsWith('./')) {
        appendTerminalLine(`Executing: ${command}`);
        appendTerminalLine('Script executed successfully.');
        return;
    }

    // Handle pipes (ls | grep txt)
    const pipeIndex = args.indexOf('|');
    if (pipeIndex !== -1) {
        const leftCmd = command;
        const rightCmd = args[pipeIndex + 1];
        const rightArgs = args.slice(pipeIndex + 2);
        
        if (leftCmd === 'ls' && rightCmd === 'grep') {
            const pattern = rightArgs[0] || '';
            const list = terminalState.files[terminalState.cwd] || [];
            const filtered = list.filter(item => item.includes(pattern));
            if (filtered.length > 0) {
                appendTerminalLine(filtered.join('  '));
            } else {
                appendTerminalLine('(no matches)');
            }
        } else {
            appendTerminalLine(`(Pipe: ${leftCmd} | ${rightCmd} ${rightArgs.join(' ')})`);
        }
        return;
    }

    // Handle redirects (cat file.txt > new.txt)
    const redirectIndex = args.indexOf('>');
    const appendIndex = args.indexOf('>>');
    if (redirectIndex !== -1 || appendIndex !== -1) {
        const idx = redirectIndex !== -1 ? redirectIndex : appendIndex;
        const op = redirectIndex !== -1 ? '>' : '>>';
        const file = args[idx + 1];
        if (file) {
            appendTerminalLine(`Output ${op === '>' ? 'redirected' : 'appended'} to '${file}'`);
        }
        return;
    }

    switch (command) {
        case 'clear':
            const win = document.getElementById('virtualTerminal');
            if (win) win.innerHTML = '';
            break;
        case 'help':
            appendTerminalLine('Kali Linux Commands Available:');
            appendTerminalLine('  File: ls, cd, pwd, mkdir, rmdir, rm, cp, mv, cat, touch, nano, vim, find, grep');
            appendTerminalLine('  System: whoami, uname, date, uptime, df, free, top, ps, kill, history, clear');
            appendTerminalLine('  Network: ifconfig, ip, ping, netstat, ss, nmap, whois, dig, host');
            appendTerminalLine('  Package: sudo apt update, sudo apt install, sudo apt upgrade, sudo apt search');
            appendTerminalLine('  Security: nmap, metasploit, hydra, john, hashcat, sqlmap, burpsuite, wireshark');
            appendTerminalLine('  Wireless: airmon-ng, airodump-ng, aircrack-ng, wifite');
            appendTerminalLine('Type any command to see realistic output!');
            break;
        case 'pwd':
            appendTerminalLine(`/home/kali/${terminalState.cwd === '~' ? '' : terminalState.cwd.replace('~/', '')}`.replace(/\/$/, ''));
            break;
        case 'whoami':
            appendTerminalLine('kali');
            break;
        case 'uname':
            appendTerminalLine('Linux kali 6.6.0-kali5-amd64 #1 SMP Debian 6.6.9-1kali1 (2024-01-02) x86_64 GNU/Linux');
            break;
        case 'ls': {
            const pathKey = terminalState.cwd;
            const list = terminalState.files[pathKey] || ['README.md', 'script.sh'];
            if (args.includes('-l')) {
                appendTerminalLine('total 24');
                list.forEach(item => {
                    const isDir = !item.includes('.');
                    const perms = isDir ? 'drwxr-xr-x' : '-rw-r--r--';
                    const size = isDir ? '4096' : '1024';
                    const date = 'Jan  1 12:34';
                    appendTerminalLine(`${perms}  1 kali kali  ${size} ${date} ${item}`);
                });
            } else if (args.includes('-a')) {
                const allList = ['.', '..', ...list];
                appendTerminalLine(allList.join('  '));
            } else {
                appendTerminalLine(list.join('  '));
            }
            break;
        }
        case 'cd': {
            const target = args[0] || '~';
            if (target === '~' || target === '/home/kali') {
                terminalState.cwd = '~';
                updateTerminalPrompt();
            } else if (target === '..') {
                if (terminalState.cwd === '~') {
                    appendTerminalLine('bash: cd: ..: No such file or directory');
                } else {
                    terminalState.cwd = '~';
                    updateTerminalPrompt();
                }
            } else if (target === 'Tools' || target === '~/Tools' || target === '/home/kali/Tools') {
                if (terminalState.files['~'].includes('Tools')) {
                    terminalState.cwd = '~/Tools';
                    updateTerminalPrompt();
                } else {
                    appendTerminalLine(`bash: cd: ${target}: No such file or directory`);
                }
            } else if (target === 'Desktop' || target === '~/Desktop' || target === '/home/kali/Desktop') {
                if (terminalState.files['~'].includes('Desktop')) {
                    terminalState.cwd = '~/Desktop';
                    updateTerminalPrompt();
                } else {
                    appendTerminalLine(`bash: cd: ${target}: No such file or directory`);
                }
            } else if (target.startsWith('~/') || target.startsWith('/home/kali/')) {
                const dir = target.replace(/^\/home\/kali\//, '').replace(/^~\//, '');
                if (terminalState.files['~'].includes(dir)) {
                    terminalState.cwd = `~/${dir}`;
                    updateTerminalPrompt();
                } else {
                    appendTerminalLine(`bash: cd: ${target}: No such file or directory`);
                }
            } else {
                // Check if it's a subdirectory
                if (terminalState.files['~'].includes(target)) {
                    terminalState.cwd = `~/${target}`;
                    updateTerminalPrompt();
                } else {
                    appendTerminalLine(`bash: cd: ${target}: No such file or directory`);
                }
            }
            break;
        }
        case 'ifconfig':
            appendTerminalLine('eth0: flags=4163<UP,BROADCAST,RUNNING,MULTICAST>  mtu 1500');
            appendTerminalLine('        inet 192.168.1.23  netmask 255.255.255.0  broadcast 192.168.1.255');
            appendTerminalLine('wlan0: flags=4099<UP,BROADCAST,MULTICAST>  mtu 1500');
            appendTerminalLine('        inet 10.0.0.5  netmask 255.255.255.0  broadcast 10.0.0.255');
            break;
        case 'ip':
            appendTerminalLine('1: lo: <LOOPBACK,UP,LOWER_UP> mtu 65536 qdisc noqueue state UNKNOWN group default');
            appendTerminalLine('2: eth0: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc mq state UP group default');
            break;
        case 'ping':
            appendTerminalLine(`PING ${args[0] || 'google.com'} (142.250.0.0) 56(84) bytes of data.`);
            appendTerminalLine('64 bytes from 142.250.0.0: icmp_seq=1 ttl=115 time=32.5 ms');
            appendTerminalLine('64 bytes from 142.250.0.0: icmp_seq=2 ttl=115 time=31.8 ms');
            appendTerminalLine('--- ping statistics ---');
            appendTerminalLine('2 packets transmitted, 2 received, 0% packet loss');
            break;
        case 'history':
            terminalState.history.forEach((h, idx) => appendTerminalLine(`${idx + 1}  ${h}`));
            break;
        case 'cat':
            if (args[0]) {
                appendTerminalLine(`Contents of ${args[0]}:`);
                appendTerminalLine('# Kali Linux Security Tools');
                appendTerminalLine('# This is a sample file in the virtual terminal');
            } else {
                appendTerminalLine('cat: missing file operand');
            }
            break;
        case 'echo':
            appendTerminalLine(args.join(' '));
            break;
        case 'date':
            appendTerminalLine(new Date().toLocaleString('en-US', { timeZone: 'UTC', weekday: 'short', year: 'numeric', month: 'short', day: 'numeric', hour: '2-digit', minute: '2-digit', second: '2-digit' }));
            break;
        case 'netstat':
            appendTerminalLine('Active Internet connections');
            appendTerminalLine('Proto Recv-Q Send-Q Local Address           Foreign Address         State');
            appendTerminalLine('tcp        0      0 0.0.0.0:22              0.0.0.0:*               LISTEN');
            appendTerminalLine('tcp        0      0 127.0.0.1:3306          0.0.0.0:*               LISTEN');
            break;
        case 'ss':
            appendTerminalLine('Netid  State   Recv-Q  Send-Q   Local Address:Port     Peer Address:Port');
            appendTerminalLine('tcp    LISTEN  0       128           0.0.0.0:22             0.0.0.0:*');
            appendTerminalLine('tcp    LISTEN  0       128         127.0.0.1:3306          0.0.0.0:*');
            break;
        case 'mkdir':
            if (args[0]) {
                appendTerminalLine(`Directory '${args[0]}' created successfully.`);
            } else {
                appendTerminalLine('mkdir: missing operand');
            }
            break;
        case 'rmdir':
            if (args[0]) {
                appendTerminalLine(`Directory '${args[0]}' removed.`);
            } else {
                appendTerminalLine('rmdir: missing operand');
            }
            break;
        case 'rm':
            if (args[0]) {
                appendTerminalLine(`File '${args[0]}' removed.`);
            } else {
                appendTerminalLine('rm: missing operand');
            }
            break;
        case 'cp':
            if (args.length >= 2) {
                appendTerminalLine(`Copied '${args[0]}' to '${args[1]}'.`);
            } else {
                appendTerminalLine('cp: missing file operand');
            }
            break;
        case 'mv':
            if (args.length >= 2) {
                appendTerminalLine(`Moved '${args[0]}' to '${args[1]}'.`);
            } else {
                appendTerminalLine('mv: missing file operand');
            }
            break;
        case 'touch':
            if (args[0]) {
                appendTerminalLine(`File '${args[0]}' created.`);
            } else {
                appendTerminalLine('touch: missing file operand');
            }
            break;
        case 'nano':
        case 'vim':
            if (args[0]) {
                appendTerminalLine(`Opening '${args[0]}' in ${command}...`);
                appendTerminalLine('(Virtual terminal - file editing simulated)');
            } else {
                appendTerminalLine(`${command}: missing file operand`);
            }
            break;
        case 'find':
            appendTerminalLine('/home/kali/Desktop');
            appendTerminalLine('/home/kali/Documents');
            appendTerminalLine('/home/kali/Tools/nmap');
            break;
        case 'grep':
            if (args.length >= 2) {
                appendTerminalLine(`Found matches in '${args[args.length-1]}':`);
                appendTerminalLine(`Line 1: ${args[0]} found`);
            } else {
                appendTerminalLine('grep: missing pattern or file');
            }
            break;
        case 'uptime':
            appendTerminalLine(' 12:34:56 up 2 days,  3:45,  1 user,  load average: 0.12, 0.15, 0.18');
            break;
        case 'df':
            appendTerminalLine('Filesystem     1K-blocks    Used Available Use% Mounted on');
            appendTerminalLine('/dev/sda1       52428800 15728640  35061760  31% /');
            appendTerminalLine('/dev/sda2      104857600 52428800  47185920  50% /home');
            break;
        case 'free':
            appendTerminalLine('              total        used        free      shared  buff/cache   available');
            appendTerminalLine('Mem:        8192000     2097152     3145728      524288     2949120     4718592');
            appendTerminalLine('Swap:       2097152           0     2097152');
            break;
        case 'top':
            appendTerminalLine('top - 12:34:56 up 2 days,  3:45,  1 user,  load average: 0.12, 0.15, 0.18');
            appendTerminalLine('Tasks: 156 total,   1 running, 155 sleeping,   0 stopped,   0 zombie');
            appendTerminalLine('%Cpu(s):  2.5 us,  1.2 sy,  0.0 ni, 96.3 id,  0.0 wa,  0.0 hi,  0.0 si,  0.0 st');
            appendTerminalLine('MiB Mem :   8000.0 total,   2048.0 free,   3072.0 used,   2880.0 buff/cache');
            break;
        case 'ps':
            if (args.includes('aux')) {
                appendTerminalLine('USER       PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND');
                appendTerminalLine('root         1  0.0  0.1  16984  8192 ?        Ss   10:00   0:01 /sbin/init');
                appendTerminalLine('kali       1234  0.5  2.1 524288 16384 ?        S    10:05   0:15 /usr/bin/firefox');
            } else {
                appendTerminalLine('  PID TTY          TIME CMD');
                appendTerminalLine(' 1234 pts/0    00:00:05 bash');
                appendTerminalLine(' 5678 pts/0    00:00:01 ps');
            }
            break;
        case 'kill':
            if (args[0]) {
                appendTerminalLine(`Process ${args[0]} terminated.`);
            } else {
                appendTerminalLine('kill: usage: kill [-s sigspec | -n signum | -sigspec] pid | jobspec ... or kill -l [sigspec]');
            }
            break;
        case 'nmap':
            if (args.length > 0) {
                const target = args[args.length - 1];
                appendTerminalLine(`Starting Nmap 7.94 ( https://nmap.org ) at ${new Date().toLocaleTimeString()}`);
                appendTerminalLine(`Nmap scan report for ${target}`);
                appendTerminalLine('Host is up (0.023s latency).');
                appendTerminalLine('Not shown: 998 closed ports');
                appendTerminalLine('PORT   STATE SERVICE');
                appendTerminalLine('22/tcp open  ssh');
                appendTerminalLine('80/tcp open  http');
                appendTerminalLine('Nmap done: 1 IP address (1 host up) scanned in 1.23 seconds');
            } else {
                appendTerminalLine('Nmap 7.94 ( https://nmap.org )');
                appendTerminalLine('Usage: nmap [Scan Type(s)] [Options] {target specification}');
            }
            break;
        case 'whois':
            if (args[0]) {
                appendTerminalLine(`Domain: ${args[0]}`);
                appendTerminalLine('Registrar: Example Registrar');
                appendTerminalLine('Creation Date: 2020-01-01');
                appendTerminalLine('Expiration Date: 2025-01-01');
            } else {
                appendTerminalLine('whois: missing domain name');
            }
            break;
        case 'dig':
            if (args[0]) {
                appendTerminalLine(`; <<>> DiG 9.18.1 <<>> ${args[0]}`);
                appendTerminalLine(`;; global options: +cmd`);
                appendTerminalLine(`;; Got answer:`);
                appendTerminalLine(`;; ANSWER SECTION:`);
                appendTerminalLine(`${args[0]}.    3600    IN    A    192.168.1.1`);
            } else {
                appendTerminalLine('dig: missing domain name');
            }
            break;
        case 'host':
            if (args[0]) {
                appendTerminalLine(`${args[0]} has address 192.168.1.1`);
            } else {
                appendTerminalLine('host: missing domain name');
            }
            break;
        case 'metasploit':
        case 'msfconsole':
            appendTerminalLine('                                                   _____');
            appendTerminalLine('    _____ _____    _____    _____ _____ _____    |   __|_____ ___ ___');
            appendTerminalLine('   |     |  _  |  |  _  |  |     |  _  |     |   |  |  |     | . | . |');
            appendTerminalLine('   | | | |     |  |     |  | | | |     | | | |   |_____|_|_|_|___|___|');
            appendTerminalLine('   |_|_|_|__|__|  |__|__|  |_|_|_|__|__|_|_|_|');
            appendTerminalLine('');
            appendTerminalLine('       =[ metasploit v6.3.0-dev                          ]');
            appendTerminalLine('+ -- --=[ 2312 exploits - 1218 auxiliary - 412 post       ]');
            appendTerminalLine('+ -- --=[ 1384 payloads - 46 encoders - 11 nops          ]');
            appendTerminalLine('+ -- --=[ 9 evasion                                       ]');
            appendTerminalLine('');
            appendTerminalLine('Metasploit tip: View all framework commands using');
            appendTerminalLine('the help command');
            appendTerminalLine('');
            appendTerminalLine('msf6 >');
            break;
        case 'hydra':
            appendTerminalLine('Hydra v9.5 (c) 2022 by van Hauser/THC & David Maciejak');
            appendTerminalLine('Please do not use in military or secret service organizations, or for illegal purposes.');
            appendTerminalLine('Starting password attack...');
            appendTerminalLine('[22][ssh] host: target_ip   login: user   password: pass123');
            appendTerminalLine('1 of 1 target successfully completed, 1 valid password found');
            break;
        case 'john':
            if (args[0]) {
                appendTerminalLine('Loaded 1 password hash (Raw-MD5 [MD5 128/128 AVX 4x3])');
                appendTerminalLine('Press \'q\' or Ctrl-C to abort, almost any other key for status');
                appendTerminalLine('password123      (hash)');
                appendTerminalLine('1g 0:00:00:12 DONE (2024-01-01 12:34) 0.08333g/s 1024Kp/s 1024Kc/s 1024KC/s');
            } else {
                appendTerminalLine('John the Ripper password cracker');
                appendTerminalLine('Usage: john [OPTIONS] [PASSWORD-FILES]');
            }
            break;
        case 'hashcat':
            appendTerminalLine('hashcat (v6.2.6) starting...');
            appendTerminalLine('OpenCL API (OpenCL 3.0) - Platform #1 [NVIDIA Corporation]');
            appendTerminalLine('* Device #1: NVIDIA GeForce RTX 3090, 20480/24564 MB, 82MCU');
            appendTerminalLine('Hash: $2y$10$example...');
            appendTerminalLine('Time.Started.....: Mon Jan  1 12:34:56 2024 (0 secs)');
            appendTerminalLine('Time.Estimated...: Mon Jan  1 12:35:00 2024 (4 secs)');
            break;
        case 'sqlmap':
            appendTerminalLine('        ___');
            appendTerminalLine('       __H__');
            appendTerminalLine(' ___ ___[)]_____ ___ ___  {1.7.8#stable}');
            appendTerminalLine('|_ -| . [(]     | .\'| | |');
            appendTerminalLine('|___|_  [)]_|_|_|__,|  _|');
            appendTerminalLine('      |_|V...       |_|   https://sqlmap.org');
            appendTerminalLine('');
            appendTerminalLine('[!] legal disclaimer: Usage of sqlmap for attacking targets without prior mutual consent is illegal.');
            appendTerminalLine('[*] starting @ 12:34:56/2024-01-01');
            break;
        case 'burpsuite':
            appendTerminalLine('Starting Burp Suite Community Edition...');
            appendTerminalLine('Burp Suite is loading...');
            appendTerminalLine('(GUI would open in real Burp Suite)');
            break;
        case 'wireshark':
            appendTerminalLine('Starting Wireshark...');
            appendTerminalLine('(GUI would open in real Wireshark)');
            break;
        case 'airmon-ng':
            if (args[0] === 'start' && args[1]) {
                appendTerminalLine(`Interface ${args[1]} is now in monitor mode`);
                appendTerminalLine(`New interface: ${args[1]}mon`);
            } else {
                appendTerminalLine('PHY Interface   Driver      Chipset');
                appendTerminalLine('phy0    wlan0       rt2800usb   Ralink Technology, Corp. RT5370');
            }
            break;
        case 'airodump-ng':
            appendTerminalLine(' CH  6 ][ Elapsed: 0 s ][ 2024-01-01 12:34 ]');
            appendTerminalLine('');
            appendTerminalLine(' BSSID              PWR  Beacons    #Data, #/s  CH  MB   CC  ESSID');
            appendTerminalLine(' AA:BB:CC:DD:EE:FF  -45       12        5    0   6   54e  WPA2 TestNetwork');
            break;
        case 'aircrack-ng':
            appendTerminalLine('Opening cap file...');
            appendTerminalLine('Read 1234 packets.');
            appendTerminalLine('   #  BSSID              ESSID                     Encryption');
            appendTerminalLine('   1  AA:BB:CC:DD:EE:FF  TestNetwork               WPA (1 handshake)');
            appendTerminalLine('Index number of target network ?');
            break;
        case 'wifite':
            appendTerminalLine('Scanning for wireless networks...');
            appendTerminalLine('Found 3 networks');
            appendTerminalLine('  [1] TestNetwork (WPA2) - AA:BB:CC:DD:EE:FF');
            appendTerminalLine('Select target(s) (1-3, all, or leave blank):');
            break;
        case 'sudo':
            if (args[0] === 'apt') {
                if (args[1] === 'update') {
                    appendTerminalLine('Hit:1 http://http.kali.org/kali kali-rolling InRelease');
                    appendTerminalLine('Reading package lists... Done');
                    appendTerminalLine('Building dependency tree... Done');
                    appendTerminalLine('Reading state information... Done');
                    appendTerminalLine('All packages are up to date.');
                } else if (args[1] === 'install' && args[2]) {
                    appendTerminalLine(`Reading package lists... Done`);
                    appendTerminalLine(`Building dependency tree... Done`);
                    appendTerminalLine(`Reading state information... Done`);
                    appendTerminalLine(`The following NEW packages will be installed:`);
                    appendTerminalLine(`  ${args[2]}`);
                    appendTerminalLine(`0 upgraded, 1 newly installed, 0 to remove and 0 not upgraded.`);
                    appendTerminalLine(`Get:1 http://http.kali.org/kali kali-rolling/main amd64 ${args[2]} amd64 1.0.0 [1024 kB]`);
                    appendTerminalLine(`Fetched 1024 kB in 1s (1024 kB/s)`);
                    appendTerminalLine(`Selecting previously unselected package ${args[2]}.`);
                    appendTerminalLine(`(Reading database ... 123456 files and directories currently installed.)`);
                    appendTerminalLine(`Preparing to unpack .../${args[2]}_1.0.0_amd64.deb ...`);
                    appendTerminalLine(`Unpacking ${args[2]} (1.0.0) ...`);
                    appendTerminalLine(`Setting up ${args[2]} (1.0.0) ...`);
                    appendTerminalLine(`Done.`);
                } else if (args[1] === 'upgrade') {
                    appendTerminalLine('Reading package lists... Done');
                    appendTerminalLine('Building dependency tree... Done');
                    appendTerminalLine('Reading state information... Done');
                    appendTerminalLine('Calculating upgrade... Done');
                    appendTerminalLine('0 upgraded, 0 newly installed, 0 to remove and 0 not upgraded.');
                } else if (args[1] === 'search' && args[2]) {
                    appendTerminalLine(`Sorting... Done`);
                    appendTerminalLine(`Full Text Search... Done`);
                    appendTerminalLine(`${args[2]}/kali-rolling,now 1.0.0 amd64`);
                    appendTerminalLine(`  ${args[2]} package description`);
                } else if (args[1] === 'remove' && args[2]) {
                    appendTerminalLine(`Reading package lists... Done`);
                    appendTerminalLine(`Building dependency tree... Done`);
                    appendTerminalLine(`Reading state information... Done`);
                    appendTerminalLine(`The following packages will be REMOVED:`);
                    appendTerminalLine(`  ${args[2]}`);
                    appendTerminalLine(`0 upgraded, 0 newly installed, 1 to remove and 0 not upgraded.`);
                    appendTerminalLine(`Removing ${args[2]} (1.0.0) ...`);
                    appendTerminalLine(`Done.`);
                } else {
                    appendTerminalLine('sudo apt: command not recognized. Try: update, install, upgrade, search, remove');
                }
            } else if (args[0] === 'su') {
                appendTerminalLine('Password:');
                appendTerminalLine('(Virtual terminal - root access simulated)');
            } else {
                appendTerminalLine(`sudo: ${args[0] || 'command'}: command simulated in Kali18 virtual terminal.`);
            }
            break;
        case 'su':
            terminalState.waitingForPassword = true;
            terminalState.passwordMode = 'su';
            appendTerminalLine('Password:');
            updateTerminalPrompt();
            break;
        case 'exit':
            if (terminalState.isRoot) {
                terminalState.isRoot = false;
                appendTerminalLine('exit');
                updateTerminalPrompt();
            } else {
                appendTerminalLine('exit');
            }
            break;
        case 'id':
            appendTerminalLine(`uid=1000(kali) gid=1000(kali) groups=1000(kali),24(cdrom),25(floppy),27(sudo),29(audio),30(dip),44(video),46(plugdev),100(users),106(netdev),111(bluetooth),117(scanner)`);
            break;
        case 'passwd':
            appendTerminalLine('Changing password for kali.');
            appendTerminalLine('Current password:');
            appendTerminalLine('(Virtual terminal - password change simulated)');
            break;
        case 'chmod':
            if (args.length >= 2) {
                appendTerminalLine(`Permissions changed for '${args[args.length-1]}'`);
            } else {
                appendTerminalLine('chmod: missing operand');
            }
            break;
        case 'chown':
            if (args.length >= 2) {
                appendTerminalLine(`Ownership changed for '${args[args.length-1]}'`);
            } else {
                appendTerminalLine('chown: missing operand');
            }
            break;
        case 'traceroute':
            const target = args[0] || 'google.com';
            appendTerminalLine(`traceroute to ${target} (142.250.0.0), 30 hops max, 60 byte packets`);
            appendTerminalLine(' 1  gateway (192.168.1.1)  1.234 ms  1.456 ms  1.678 ms');
            appendTerminalLine(' 2  10.0.0.1  5.123 ms  5.234 ms  5.345 ms');
            appendTerminalLine(' 3  * * *');
            break;
        case 'arp':
            appendTerminalLine('Address                  HWtype  HWaddress           Flags Mask            Iface');
            appendTerminalLine('192.168.1.1              ether   aa:bb:cc:dd:ee:ff   C                     eth0');
            appendTerminalLine('192.168.1.23             ether   11:22:33:44:55:66   C                     eth0');
            break;
        case 'apt':
            if (args[0] === 'update') {
                appendTerminalLine('Hit:1 http://http.kali.org/kali kali-rolling InRelease');
                appendTerminalLine('Reading package lists... Done');
            } else if (args[0] === 'upgrade') {
                appendTerminalLine('Reading package lists... Done');
                appendTerminalLine('Building dependency tree... Done');
                appendTerminalLine('0 upgraded, 0 newly installed, 0 to remove and 0 not upgraded.');
            } else if (args[0] === 'install' && args[1]) {
                appendTerminalLine(`The following NEW packages will be installed: ${args[1]}`);
                appendTerminalLine(`0 upgraded, 1 newly installed, 0 to remove and 0 not upgraded.`);
            } else if (args[0] === 'remove' && args[1]) {
                appendTerminalLine(`The following packages will be REMOVED: ${args[1]}`);
            } else if (args[0] === 'autoremove') {
                appendTerminalLine('Reading package lists... Done');
                appendTerminalLine('0 packages will be removed.');
            } else {
                appendTerminalLine('apt: command not recognized');
            }
            break;
        case 'htop':
            appendTerminalLine('(Virtual terminal - htop GUI would open in real terminal)');
            appendTerminalLine('Press F10 to quit');
            break;
        case 'locate':
            if (args[0]) {
                appendTerminalLine(`/usr/bin/${args[0]}`);
                appendTerminalLine(`/etc/${args[0]}.conf`);
            } else {
                appendTerminalLine('locate: missing pattern');
            }
            break;
        case 'which':
            if (args[0]) {
                appendTerminalLine(`/usr/bin/${args[0]}`);
            } else {
                appendTerminalLine('which: missing command name');
            }
            break;
        case 'whereis':
            if (args[0]) {
                appendTerminalLine(`${args[0]}: /usr/bin/${args[0]} /usr/share/man/man1/${args[0]}.1.gz`);
            } else {
                appendTerminalLine('whereis: missing command name');
            }
            break;
        case 'bash':
            if (args[0]) {
                appendTerminalLine(`Running script: ${args[0]}`);
                appendTerminalLine('Script executed successfully.');
            } else {
                appendTerminalLine('bash: missing script file');
            }
            break;
        case 'crontab':
            if (args[0] === '-e') {
                appendTerminalLine('(Virtual terminal - crontab editor would open)');
            } else if (args[0] === '-l') {
                appendTerminalLine('# m h  dom mon dow   command');
                appendTerminalLine('0 2 * * * /usr/bin/backup.sh');
            } else {
                appendTerminalLine('crontab: usage: crontab [-u user] file');
            }
            break;
        case 'zip':
            if (args.length >= 2) {
                appendTerminalLine(`  adding: ${args[args.length-1]} (deflated 45%)`);
                appendTerminalLine(`Created: ${args[0]}`);
            } else {
                appendTerminalLine('zip: missing file operand');
            }
            break;
        case 'unzip':
            if (args[0]) {
                appendTerminalLine(`Archive:  ${args[0]}`);
                appendTerminalLine('  inflating: file.txt');
            } else {
                appendTerminalLine('unzip: missing archive file');
            }
            break;
        case 'tar':
            if (args.includes('-cvf') && args.length >= 3) {
                appendTerminalLine(`${args[args.length-1]}/`);
                appendTerminalLine(`${args[args.length-1]}/file1.txt`);
                appendTerminalLine(`Created archive: ${args[args.length-2]}`);
            } else if (args.includes('-xvf') && args[0]) {
                appendTerminalLine(`${args[args.length-1]}/`);
                appendTerminalLine(`${args[args.length-1]}/file1.txt`);
                appendTerminalLine('Extracted successfully.');
            } else {
                appendTerminalLine('tar: missing operand');
            }
            break;
        case 'iwconfig':
            appendTerminalLine('wlan0     IEEE 802.11  ESSID:"TestNetwork"');
            appendTerminalLine('          Mode:Managed  Frequency:2.437 GHz  Access Point: AA:BB:CC:DD:EE:FF');
            appendTerminalLine('          Bit Rate=54 Mb/s   Tx-Power=20 dBm');
            break;
        case 'aireplay-ng':
            appendTerminalLine('aireplay-ng 9.60  - (C) 2006-2020 Thomas d\'Otreppe');
            appendTerminalLine('Usage: aireplay-ng <options> <interface>');
            break;
        case 'neofetch':
            appendTerminalLine('       _,met$$$$$gg');
            appendTerminalLine('    ,g$$$$$$$$$$$$$$$P.');
            appendTerminalLine('  ,g$$P""       """Y$$.');
            appendTerminalLine(' ,$$P\'              `$$$.');
            appendTerminalLine('\',$$P       ,ggs.     `$$b:');
            appendTerminalLine('`d$$\'     ,$P"\'   .    $$$');
            appendTerminalLine(' $$P      d$\'     ,    $$P');
            appendTerminalLine(' $$:      $$.   -    ,d$$\'');
            appendTerminalLine(' $$;      Y$b._   _,d$P\'');
            appendTerminalLine(' Y$$.    `.`"Y$$$$P"\'');
            appendTerminalLine(' `$$b      "-.__');
            appendTerminalLine('  `Y$$');
            appendTerminalLine('   `Y$$.');
            appendTerminalLine('     `$$b.');
            appendTerminalLine('       `Y$$b.');
            appendTerminalLine('          `"Y$b._');
            appendTerminalLine('              `"""');
            appendTerminalLine('');
            appendTerminalLine('OS: Kali GNU/Linux Rolling x86_64');
            appendTerminalLine('Host: Kali Virtual Machine');
            appendTerminalLine('Kernel: 6.6.0-kali5-amd64');
            appendTerminalLine('Uptime: 2 days, 3 hours, 45 minutes');
            break;
        case 'tree':
            appendTerminalLine('.');
            appendTerminalLine('‚îú‚îÄ‚îÄ Desktop');
            appendTerminalLine('‚îÇ   ‚îú‚îÄ‚îÄ test.txt');
            appendTerminalLine('‚îÇ   ‚îî‚îÄ‚îÄ script.sh');
            appendTerminalLine('‚îú‚îÄ‚îÄ Documents');
            appendTerminalLine('‚îú‚îÄ‚îÄ Downloads');
            appendTerminalLine('‚îú‚îÄ‚îÄ Tools');
            appendTerminalLine('‚îÇ   ‚îú‚îÄ‚îÄ nmap');
            appendTerminalLine('‚îÇ   ‚îú‚îÄ‚îÄ metasploit');
            appendTerminalLine('‚îÇ   ‚îî‚îÄ‚îÄ hydra');
            appendTerminalLine('‚îî‚îÄ‚îÄ notes.txt');
            break;
        case 'watch':
            if (args.length >= 2) {
                appendTerminalLine(`Watching: ${args.slice(1).join(' ')}`);
                appendTerminalLine('(Press Ctrl+C to stop)');
            } else {
                appendTerminalLine('watch: missing command');
            }
            break;
        default:
            appendTerminalLine(`bash: ${command}: command not found`);
    }
}

function handleTerminalKey(e) {
    const inputEl = document.getElementById('terminalInput');
    if (!inputEl) return;

    if (e.key === 'Enter') {
        const value = inputEl.value;
        if (terminalState.waitingForPassword) {
            // Handle password input
            if (value === 'kali' || value === 'root') {
                if (terminalState.passwordMode === 'su') {
                    terminalState.isRoot = true;
                    appendTerminalLine('');
                    appendTerminalLine('Authentication successful. You are now root.');
                    updateTerminalPrompt();
                } else {
                    appendTerminalLine('');
                    appendTerminalLine('Authentication successful.');
                }
                terminalState.waitingForPassword = false;
                terminalState.passwordMode = null;
            } else {
                appendTerminalLine('');
                appendTerminalLine('Authentication failed. Try again.');
            }
            inputEl.value = '';
            updateTerminalPrompt();
            e.preventDefault();
            return;
        }
        
        if (value.trim()) {
            terminalState.history.push(value);
            terminalState.historyIndex = terminalState.history.length;
            handleCommand(value);
        }
        inputEl.value = '';
        e.preventDefault();
    } else if (e.key === 'ArrowUp' && !terminalState.waitingForPassword) {
        if (terminalState.history.length && terminalState.historyIndex > 0) {
            terminalState.historyIndex -= 1;
            inputEl.value = terminalState.history[terminalState.historyIndex];
            setTimeout(() => inputEl.setSelectionRange(inputEl.value.length, inputEl.value.length), 0);
        }
        e.preventDefault();
    } else if (e.key === 'ArrowDown' && !terminalState.waitingForPassword) {
        if (terminalState.historyIndex < terminalState.history.length - 1) {
            terminalState.historyIndex += 1;
            inputEl.value = terminalState.history[terminalState.historyIndex];
        } else {
            terminalState.historyIndex = terminalState.history.length;
            inputEl.value = '';
        }
        e.preventDefault();
    }
}

function handleHomeTerminalKey(e) {
    if (e.key === 'Enter') {
        e.preventDefault();
        show('terminal');
        setTimeout(() => {
            const terminalInput = document.getElementById('terminalInput');
            if (terminalInput) {
                const homeInput = document.getElementById('homeTerminalInput');
                if (homeInput && homeInput.value.trim()) {
                    terminalInput.value = homeInput.value;
                    terminalInput.focus();
                    handleTerminalKey({ ...e, target: terminalInput });
                } else {
                    terminalInput.focus();
                }
            }
        }, 100);
    }
}

// Copy code functionality
document.querySelectorAll('code').forEach(codeBlock => {
    codeBlock.style.position = 'relative';
    const copyBtn = document.createElement('button');
    copyBtn.className = 'copy-btn';
    copyBtn.innerHTML = '<i class="fas fa-copy"></i>';
    copyBtn.onclick = () => {
        const text = codeBlock.textContent.replace(/^\$/, '').trim();
        navigator.clipboard.writeText(text).then(() => {
            copyBtn.innerHTML = '<i class="fas fa-check"></i>';
            setTimeout(() => {
                copyBtn.innerHTML = '<i class="fas fa-copy"></i>';
            }, 2000);
        });
    };
    codeBlock.appendChild(copyBtn);
});

// Scroll to top
function scrollToTop() {
    window.scrollTo({ top: 0, behavior: 'smooth' });
}

// Show scroll to top button on scroll
window.addEventListener('scroll', () => {
    const scrollBtn = document.querySelector('.theme-toggle');
    if (window.scrollY > 300) {
        scrollBtn.style.display = 'flex';
        scrollBtn.style.alignItems = 'center';
        scrollBtn.style.justifyContent = 'center';
    } else {
        scrollBtn.style.display = 'flex';
    }
});

// Keyboard shortcuts
document.addEventListener('keydown', (e) => {
    // Ctrl/Cmd + K for search
    if ((e.ctrlKey || e.metaKey) && e.key === 'k') {
        e.preventDefault();
        toggleSearch();
    }
    
    // Escape to close search
    if (e.key === 'Escape' && searchActive) {
        toggleSearch();
    }
});

// Restore saved user and init Google + boot animation
window.addEventListener('load', () => {
    try {
        const saved = localStorage.getItem('kali18_user');
        if (saved) {
            currentUser = JSON.parse(saved);
            renderProfile(currentUser);
            updateProfileSection();
        }
    } catch (e) {
        console.warn('Could not restore saved user', e);
    }
    initializeGoogleSignIn();
    // Seed virtual terminal with a few demo lines
    updateTerminalPrompt();
    appendTerminalLine('Kali18 virtual terminal ready. Type \"help\" for available commands.');
    appendTerminalLine('');
    startBootSequence();
show('home');
});
</script>

</body>
</html>
